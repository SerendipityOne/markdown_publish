
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="余智杭">
      
      
      
        <link rel="prev" href="../%E8%80%83%E7%A0%94/408/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.html">
      
      
        <link rel="next" href="../%E8%BD%AF%E8%80%83/%E4%B8%AD%E7%BA%A7-%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%B8%88/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.3">
    
    
      
        <title>Build Thunderbird-114.0b6 - Serendipity_Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.c4a75a56.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#build-thunderbird-1140b6" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../index.html" title="Serendipity_Docs" class="md-header__button md-logo" aria-label="Serendipity_Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Serendipity_Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Build Thunderbird-114.0b6
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/SerendipityOne/markdown_publish" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Serendipity_Docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Serendipity_Docs" class="md-nav__button md-logo" aria-label="Serendipity_Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Serendipity_Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/SerendipityOne/markdown_publish" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Serendipity_Docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        主页
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          OI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          OI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
      
      
      
        <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
          数据结构和算法
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          数据结构和算法
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../OI/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95.html" class="md-nav__link">
        数据结构和算法
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          算法总结
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          算法总结
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../OI/%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93/%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93.html" class="md-nav__link">
        算法总结
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          动态规划
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          动态规划
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../OI/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/%E8%AE%B0%E5%BF%86%E5%8C%96%E6%90%9C%E7%B4%A2.html" class="md-nav__link">
        记忆化搜索
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../OI/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/%E8%83%8C%E5%8C%85DP.html" class="md-nav__link">
        背包DP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../OI/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/%E5%8C%BA%E9%97%B4DP.html" class="md-nav__link">
        区间DP
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          java后端
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          java后端
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../java%E5%90%8E%E7%AB%AF/%E5%BE%AE%E6%9C%8D%E5%8A%A1.html" class="md-nav__link">
        微服务
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../java%E5%90%8E%E7%AB%AF/Centos7%E5%AE%89%E8%A3%85Docker.html" class="md-nav__link">
        Centos7安装Docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../java%E5%90%8E%E7%AB%AF/Docker%E5%91%BD%E4%BB%A4.html" class="md-nav__link">
        Docker命令
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../java%E5%90%8E%E7%AB%AF/MyBatis-Plus.html" class="md-nav__link">
        MyBatis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../java%E5%90%8E%E7%AB%AF/nacos%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA.html" class="md-nav__link">
        nacos集群搭建
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../java%E5%90%8E%E7%AB%AF/RabbitMQ%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97.html" class="md-nav__link">
        RabbitMQ部署指南
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../java%E5%90%8E%E7%AB%AF/Redis7.html" class="md-nav__link">
        Redis7
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../java%E5%90%8E%E7%AB%AF/Spring6.html" class="md-nav__link">
        Spring6
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../java%E5%90%8E%E7%AB%AF/SpringBoot.html" class="md-nav__link">
        SpringBoot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../java%E5%90%8E%E7%AB%AF/%E5%AE%89%E8%A3%85elasticsearch.html" class="md-nav__link">
        安装elasticsearch
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Qt
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Qt
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Qt/Qt.html" class="md-nav__link">
        Qt
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Python
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Python
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Python/Python%E9%BB%91%E9%A9%AC%E7%89%88.html" class="md-nav__link">
        Python黑马版
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Python/Python%E5%B0%8F%E7%94%B2%E9%B1%BC.html" class="md-nav__link">
        Python小甲鱼
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Python/%E7%88%AC%E8%99%AB.html" class="md-nav__link">
        爬虫
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          前端
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          前端
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/Vue%EF%BC%88%E9%9D%9E%E8%84%9A%E6%89%8B%E6%9E%B6%EF%BC%89.html" class="md-nav__link">
        Vue（非脚手架）
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%89%8D%E7%AB%AF/Vue%EF%BC%88%E8%84%9A%E6%89%8B%E6%9E%B6%EF%BC%89.html" class="md-nav__link">
        Vue（脚手架）
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Android
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Android
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Android/Android.html" class="md-nav__link">
        Android
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
      
      
      
        <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          嵌入式
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          嵌入式
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%B5%8C%E5%85%A5%E5%BC%8F/C51%E5%8D%95%E7%89%87%E6%9C%BA.html" class="md-nav__link">
        C51单片机
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%B5%8C%E5%85%A5%E5%BC%8F/STM32.html" class="md-nav__link">
        STM32
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
      
      
      
        <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
          考研
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          考研
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1" >
      
      
      
        <label class="md-nav__link" for="__nav_9_1" id="__nav_9_1_label" tabindex="0">
          英语
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_1">
          <span class="md-nav__icon md-icon"></span>
          英语
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%80%83%E7%A0%94/%E8%8B%B1%E8%AF%AD/%E8%AF%AD%E6%B3%95.html" class="md-nav__link">
        语法
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2" >
      
      
      
        <label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0">
          408
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_2">
          <span class="md-nav__icon md-icon"></span>
          408
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%80%83%E7%A0%94/408/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.html" class="md-nav__link">
        计算机网络
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%80%83%E7%A0%94/408/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.html" class="md-nav__link">
        计算机组成原理
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" checked>
      
      
      
        <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
          软件杯
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          软件杯
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Build Thunderbird-114.0b6
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="Build%20Thunderbird-114.0b6.html" class="md-nav__link md-nav__link--active">
        Build Thunderbird-114.0b6
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    一些准备工作
  </a>
  
    <nav class="md-nav" aria-label="一些准备工作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sshroot" class="md-nav__link">
    允许ssh使用root登录
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    安装编译需要的库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oh-my-zsh" class="md-nav__link">
    安装oh-my-zsh
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loongarchrust" class="md-nav__link">
    手动下载LoongArch支持的最新的rust
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vim" class="md-nav__link">
    设置取消vim鼠标进入可视模式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thunderbird" class="md-nav__link">
    下载Thunderbird源码与打补丁
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build" class="md-nav__link">
    开始Build
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    打包
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    测试
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
      
      
      
        <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
          软考
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          软考
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_1" >
      
      
      
        <label class="md-nav__link" for="__nav_11_1" id="__nav_11_1_label" tabindex="0">
          中级-软件设计师
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_11_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_11_1">
          <span class="md-nav__icon md-icon"></span>
          中级-软件设计师
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BD%AF%E8%80%83/%E4%B8%AD%E7%BA%A7-%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%B8%88/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html" class="md-nav__link">
        操作系统
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BD%AF%E8%80%83/%E4%B8%AD%E7%BA%A7-%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%B8%88/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E8%AF%AD%E8%A8%80%E4%B8%8E%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F%E5%9F%BA%E7%A1%80.html" class="md-nav__link">
        程序设计语言与语言处理程序基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BD%AF%E8%80%83/%E4%B8%AD%E7%BA%A7-%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%B8%88/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.html" class="md-nav__link">
        计算机网络
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BD%AF%E8%80%83/%E4%B8%AD%E7%BA%A7-%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%B8%88/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E4%B8%8E%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84.html" class="md-nav__link">
        计算机组成与结构体系
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BD%AF%E8%80%83/%E4%B8%AD%E7%BA%A7-%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%B8%88/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F.html" class="md-nav__link">
        数据库系统
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BD%AF%E8%80%83/%E4%B8%AD%E7%BA%A7-%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%B8%88/%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0.html" class="md-nav__link">
        刷题笔记
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BD%AF%E8%80%83/%E4%B8%AD%E7%BA%A7-%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%B8%88/%E6%B3%95%E5%BE%8B%E6%B3%95%E8%A7%84.html" class="md-nav__link">
        法律法规
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BD%AF%E8%80%83/%E4%B8%AD%E7%BA%A7-%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%B8%88/%E5%A4%9A%E5%AA%92%E4%BD%93%E5%9F%BA%E7%A1%80.html" class="md-nav__link">
        多媒体基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BD%AF%E8%80%83/%E4%B8%AD%E7%BA%A7-%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%B8%88/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B.html" class="md-nav__link">
        软件工程
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BD%AF%E8%80%83/%E4%B8%AD%E7%BA%A7-%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%B8%88/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E6%8A%80%E6%9C%AF.html" class="md-nav__link">
        面向对象技术
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BD%AF%E8%80%83/%E4%B8%AD%E7%BA%A7-%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%B8%88/UML%E5%BB%BA%E6%A8%A1.html" class="md-nav__link">
        UML建模
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BD%AF%E8%80%83/%E4%B8%AD%E7%BA%A7-%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%B8%88/%E6%95%B0%E6%8D%AE%E6%B5%81%E5%9B%BE.html" class="md-nav__link">
        数据流图
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
      
      
      
        <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
          5G大唐杯
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          5G大唐杯
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../5G%E5%A4%A7%E5%94%90%E6%9D%AF/5G%E6%8A%80%E6%9C%AF%E4%BB%BF%E7%9C%9F-5G%E7%89%A9%E7%90%86%E5%B1%82%E8%BF%87%E7%A8%8B.html" class="md-nav__link">
        5G技术仿真-5G物理层过程
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    一些准备工作
  </a>
  
    <nav class="md-nav" aria-label="一些准备工作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sshroot" class="md-nav__link">
    允许ssh使用root登录
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    安装编译需要的库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oh-my-zsh" class="md-nav__link">
    安装oh-my-zsh
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loongarchrust" class="md-nav__link">
    手动下载LoongArch支持的最新的rust
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vim" class="md-nav__link">
    设置取消vim鼠标进入可视模式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thunderbird" class="md-nav__link">
    下载Thunderbird源码与打补丁
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build" class="md-nav__link">
    开始Build
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    打包
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    测试
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="build-thunderbird-1140b6">Build Thunderbird-114.0b6</h1>
<h2 id="_1">一些准备工作</h2>
<h3 id="sshroot">允许ssh使用root登录</h3>
<ul>
<li>修改/etc/ssh/sshd_config文件</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>vim<span class="w"> </span>/etc/ssh/sshd_config
</code></pre></div>
<ul>
<li>修改如下：允许root账户登录</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">#PermitRootLogin prohibit-password</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>PermitRootLogin<span class="w"> </span>yes
</code></pre></div>
<ul>
<li>需要重启系统或者sshd服务</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>/etc/init.d/ssh<span class="w"> </span>stop
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>/etc/init.d/ssh<span class="w"> </span>start
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>service<span class="w"> </span>ssh<span class="w"> </span>restart
</code></pre></div>
<h3 id="_2">安装编译需要的库</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>apt<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>libalsa-ocaml-dev<span class="w"> </span>curl<span class="w"> </span>git<span class="w"> </span>clang<span class="w"> </span>nodejs<span class="w"> </span>libcanberra-gtk3-dev<span class="w"> </span>m4<span class="w"> </span>libdbus-glib-1-dev<span class="w"> </span>libxt-dev<span class="w"> </span>tmux<span class="w"> </span>libpulse-dev<span class="w"> </span>r-cran-pkgmaker<span class="w"> </span>libclang-13-dev<span class="w"> </span>llvm-13-dev<span class="w"> </span>libc++-13-dev<span class="w"> </span>debhelper
</code></pre></div>
<p>装完rust后，去到<code>~/.cargo</code>新建config，更换源</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>[source.crates-io]
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>replace-with = &#39;ustc&#39;
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>[source.ustc]
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>registry = &quot;git://mirrors.ustc.edu.cn/crates.io-index&quot;
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>cargo<span class="w"> </span>install<span class="w"> </span>cbindgen
</code></pre></div>
<p><span style='color:red'>注意：unzip的环境变量<code>/etc/environment</code>中的UNZIP需要删除，删除后还不行就重启</span></p>
<h3 id="oh-my-zsh">安装oh-my-zsh</h3>
<p>一个美化终端的插件</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>zsh
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>wget<span class="w"> </span>https://ghproxy.com/https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>sh<span class="w"> </span>install.sh
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>vim<span class="w"> </span>~/.zshrc
</code></pre></div>
<p><span style='color:red'>注：</span>如果出现<code>The TLS connection was non-properly terminated.</code>则直接将SSL校验关了，虽然可能会不太安全，但是使用完之后将其开启就行</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>http.sslVerify<span class="w"> </span><span class="nb">false</span>
</code></pre></div>
<h3 id="loongarchrust">手动下载LoongArch支持的最新的rust</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>wget<span class="w"> </span>https://rust-lang.loongnix.cn/dist/2022-11-03/rust-1.65.0-loongarch64-unknown-linux-gnu.tar.gz
</code></pre></div>
<p>进入其根目录运行<code>./install.sh</code></p>
<h3 id="vim">设置取消vim鼠标进入可视模式</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>vim<span class="w"> </span>/usr/share/vim/vim81/defaults.vim
</code></pre></div>
<p>```visual basic
用双引号注释以下字段行
if has('mouse')
  set mouse=a
endif
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>### 新增分区
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>运行`fdisk /dev/vda`输入m-&gt;p-&gt;w，格式化`mkfs -t ext4 /dev/vda4`
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>挂载：在`/home`下新建`newVda`运行`mount /dev/vda4 newVda`
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>配置重启自动挂载，输入代码`vim /etc/fstab`，将刚格式化就完成的id添加进去
</code></pre></div>
/dev/vda4 /home/newVda ext4 defaults 0 0
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>### 虚拟内存不足
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>创建swapfile
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>```sh
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>dd if=/dev/zero of=/swapfile bs=1G count=7
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>mkswap /swapfile
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>chmod 600 /swapfile
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>swapon /swapfile
</code></pre></div></p>
<p>添加开机自启</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="w">/etc/fstab</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="gu">@@-11,0 +11,32@@</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="gi">+/swapfile swap swap defaults 0 0</span>
</code></pre></div>
<h3 id="thunderbird">下载Thunderbird源码与打补丁</h3>
<p>源码：<a href="https://archive.mozilla.org/pub/thunderbird/releases/114.0b6/source/">source</a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>wget<span class="w"> </span>https://archive.mozilla.org/pub/thunderbird/releases/114.0b6/source/thunderbird-114.0b6.source.tar.xz
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>tar<span class="w"> </span>-xvf<span class="w"> </span>thunderbird-114.0b6.source.tar.xz
</code></pre></div>
<p>在根目录用<code>./mach configure &amp;&amp; ./mach build</code></p>
<p>下载龙芯支持的rust最新源码<a href="https://rust-lang.loongnix.cn/dist/2022-11-03/rust-1.65.0-loongarch64-unknown-linux-gnu.tar.gz">realease</a>，解压并安装</p>
<p>添加mozconfig</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>ac_add_options<span class="w"> </span>--enable-application<span class="o">=</span>comm/mail
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>ac_add_options<span class="w"> </span>--enable-project<span class="o">=</span>comm/mail
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>ac_add_options<span class="w"> </span>--disable-crashreporter<span class="w">  </span><span class="c1"># 取消 Firefox 在崩溃时写出小型转储文件的机制</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>ac_add_options<span class="w"> </span>--disable-jit<span class="w">    </span><span class="c1">#  禁用JS的jit优化手段</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>ac_add_options<span class="w"> </span>--enable-official-branding<span class="w">   </span><span class="c1"># 开启thunderbird的官方图标等</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>ac_add_options<span class="w"> </span>--without-wasm-sandboxed-libraries
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>ac_add_options<span class="w"> </span>--disable-updater
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="nb">unset</span><span class="w"> </span>MOZ_TELEMETRY_REPORTING<span class="w">   </span><span class="c1"># 取消向 Firefox 发送报告</span>
</code></pre></div>
<p>修改comm/third_party/botan内的文件，参考<a href="https://github.com/randombit/botan/commit/7bc8a874f613630d20a90d742cffef1466ba1147">botan</a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="w">comm/third_party/botan/src/build-data/arch/loongarch64.txt</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="gu">@@ -0,0 +1,3 @@</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="gi">+family loongarch</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="gi">+endian little</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="gi">+wordsize 64</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="w">comm/third_party/botan/src/build-data/detect_arch.cpp</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="gu">@@ -70,6 +70,9 @@</span>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="gi">+#elif defined(__loongarch64)</span>
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="gi">+  LOONGARCH64</span>
</code></pre></div>
<p>删除根目录下<code>Cargo.lock</code>中的nix、cty，同时需要清空对应目录（third_party/rust/nix、third_party/rust/cty）下的<code>.cargo-checksum.json</code>，只剩下<code>{"files": {}}</code></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="gu">@@-3643,0 +3643,78@@</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">[[package]]</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="w">name = &quot;nix&quot;</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">version = &quot;0.26.2&quot;</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="gd">-checksum = &quot;bfdda3d196821d6af13126e40375cdf7da646a96114af134d5f417a9a1dc8e1a&quot;</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="w">dependencies = [</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="w"> </span>&quot;bitflags 1.3.2&quot;,
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="w"> </span>&quot;cfg-if 1.0.0&quot;,
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="w"> </span>&quot;libc&quot;,
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="w"> </span>&quot;static_assertions&quot;,
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="w">]</span>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="gu">@@-1053,0 +1053,78@@</span>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a><span class="w">[[package]]</span>
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a><span class="w">name = &quot;cty&quot;</span>
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a><span class="w">version = &quot;0.2.2&quot;</span>
<a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a><span class="w">source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;</span>
<a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a><span class="gd">-checksum = &quot;b365fabc795046672053e29c954733ec3b05e4be654ab130fe8f1f94d7051f35&quot;</span>
</code></pre></div>
<p>根据<a href="https://github.com/sunhaiyong1978/CLFS-for-LoongArch/blob/f4bbdba162cde53bc076846fd692e430912f3b38/patches/firefox-110-fix-rust.patch#L61">THIS</a>，打补丁</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="gh">diff --git a/third_party/rust/authenticator/build.rs b/third_party/rust/authenticator/build.rs</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="gh">index c972d85b89..3b2f12171f 100644</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="gd">--- a/third_party/rust/authenticator/build.rs</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="gi">+++ b/third_party/rust/authenticator/build.rs</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="gu">@@ -47,6 +47,8 @@ fn main() {</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w"> </span>        &quot;ioctl_s390xbe.rs&quot;
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="w"> </span>    } else if cfg!(all(target_arch = &quot;riscv64&quot;, target_endian = &quot;little&quot;)) {
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="w"> </span>        &quot;ioctl_riscv64.rs&quot;
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="gi">+    } else if cfg!(all(target_arch = &quot;loongarch64&quot;, target_endian = &quot;little&quot;)) {</span>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="gi">+        &quot;ioctl_loongarch64.rs&quot;</span>
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="w"> </span>    } else {
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="w"> </span>        panic!(&quot;architecture not supported&quot;);
<a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a><span class="w"> </span>    };
<a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a>
<a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a>
<a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a><span class="gh">diff --git a/third_party/rust/authenticator/src/transport/linux/hidwrapper.rs b/third_party/rust/authenticator/src/transport/linux/hidwrapper.rs</span>
<a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a><span class="gh">index 82aabc6301..bc8582c5b1 100644</span>
<a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a><span class="gd">--- a/third_party/rust/authenticator/src/transport/linux/hidwrapper.rs</span>
<a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a><span class="gi">+++ b/third_party/rust/authenticator/src/transport/linux/hidwrapper.rs</span>
<a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a><span class="gu">@@ -49,3 +49,6 @@ include!(&quot;ioctl_s390xbe.rs&quot;);</span>
<a id="__codelineno-17-21" name="__codelineno-17-21" href="#__codelineno-17-21"></a>
<a id="__codelineno-17-22" name="__codelineno-17-22" href="#__codelineno-17-22"></a><span class="w"> </span>#[cfg(all(target_arch = &quot;riscv64&quot;, target_endian = &quot;little&quot;))]
<a id="__codelineno-17-23" name="__codelineno-17-23" href="#__codelineno-17-23"></a><span class="w"> </span>include!(&quot;ioctl_riscv64.rs&quot;);
<a id="__codelineno-17-24" name="__codelineno-17-24" href="#__codelineno-17-24"></a><span class="gi">+</span>
<a id="__codelineno-17-25" name="__codelineno-17-25" href="#__codelineno-17-25"></a><span class="gi">+#[cfg(all(target_arch = &quot;loongarch64&quot;, target_endian = &quot;little&quot;))]</span>
<a id="__codelineno-17-26" name="__codelineno-17-26" href="#__codelineno-17-26"></a><span class="gi">+include!(&quot;ioctl_loongarch64.rs&quot;);</span>
<a id="__codelineno-17-27" name="__codelineno-17-27" href="#__codelineno-17-27"></a>
<a id="__codelineno-17-28" name="__codelineno-17-28" href="#__codelineno-17-28"></a>
<a id="__codelineno-17-29" name="__codelineno-17-29" href="#__codelineno-17-29"></a><span class="gh">diff --git a/third_party/rust/authenticator/src/transport/linux/ioctl_loongarch64.rs b/third_party/rust/authenticator/src/transport/linux/ioctl_loongarch64.rs</span>
<a id="__codelineno-17-30" name="__codelineno-17-30" href="#__codelineno-17-30"></a><span class="w">new file mode 100644</span>
<a id="__codelineno-17-31" name="__codelineno-17-31" href="#__codelineno-17-31"></a><span class="gh">index 0000000000..a784e9bf46</span>
<a id="__codelineno-17-32" name="__codelineno-17-32" href="#__codelineno-17-32"></a><span class="gd">--- /dev/null</span>
<a id="__codelineno-17-33" name="__codelineno-17-33" href="#__codelineno-17-33"></a><span class="gi">+++ b/third_party/rust/authenticator/src/transport/linux/ioctl_loongarch64.rs</span>
<a id="__codelineno-17-34" name="__codelineno-17-34" href="#__codelineno-17-34"></a><span class="gu">@@ -0,0 +1,5 @@</span>
<a id="__codelineno-17-35" name="__codelineno-17-35" href="#__codelineno-17-35"></a><span class="gi">+/* automatically generated by rust-bindgen */</span>
<a id="__codelineno-17-36" name="__codelineno-17-36" href="#__codelineno-17-36"></a><span class="gi">+</span>
<a id="__codelineno-17-37" name="__codelineno-17-37" href="#__codelineno-17-37"></a><span class="gi">+pub type __u32 = ::std::os::raw::c_uint;</span>
<a id="__codelineno-17-38" name="__codelineno-17-38" href="#__codelineno-17-38"></a><span class="gi">+pub const _HIDIOCGRDESCSIZE: __u32 = 2147764225;</span>
<a id="__codelineno-17-39" name="__codelineno-17-39" href="#__codelineno-17-39"></a><span class="gi">+pub const _HIDIOCGRDESC: __u32 = 2416199682;</span>
<a id="__codelineno-17-40" name="__codelineno-17-40" href="#__codelineno-17-40"></a>
<a id="__codelineno-17-41" name="__codelineno-17-41" href="#__codelineno-17-41"></a>
<a id="__codelineno-17-42" name="__codelineno-17-42" href="#__codelineno-17-42"></a><span class="gh">diff --git a/third_party/rust/cty/src/lib.rs b/third_party/rust/cty/src/lib.rs</span>
<a id="__codelineno-17-43" name="__codelineno-17-43" href="#__codelineno-17-43"></a><span class="gh">index 971c9cb3a9..80b8f3f291 100644</span>
<a id="__codelineno-17-44" name="__codelineno-17-44" href="#__codelineno-17-44"></a><span class="gd">--- a/third_party/rust/cty/src/lib.rs</span>
<a id="__codelineno-17-45" name="__codelineno-17-45" href="#__codelineno-17-45"></a><span class="gi">+++ b/third_party/rust/cty/src/lib.rs</span>
<a id="__codelineno-17-46" name="__codelineno-17-46" href="#__codelineno-17-46"></a><span class="gu">@@ -24,6 +24,7 @@ pub use pwd::*;</span>
<a id="__codelineno-17-47" name="__codelineno-17-47" href="#__codelineno-17-47"></a><span class="w"> </span>          target_arch = &quot;powerpc&quot;,
<a id="__codelineno-17-48" name="__codelineno-17-48" href="#__codelineno-17-48"></a><span class="w"> </span>          target_arch = &quot;powerpc64&quot;,
<a id="__codelineno-17-49" name="__codelineno-17-49" href="#__codelineno-17-49"></a><span class="w"> </span>          target_arch = &quot;s390x&quot;,
<a id="__codelineno-17-50" name="__codelineno-17-50" href="#__codelineno-17-50"></a><span class="gi">+          target_arch = &quot;loongarch64&quot;,</span>
<a id="__codelineno-17-51" name="__codelineno-17-51" href="#__codelineno-17-51"></a><span class="w"> </span>          target_arch = &quot;riscv32&quot;,
<a id="__codelineno-17-52" name="__codelineno-17-52" href="#__codelineno-17-52"></a><span class="w"> </span>          target_arch = &quot;riscv64&quot;))]
<a id="__codelineno-17-53" name="__codelineno-17-53" href="#__codelineno-17-53"></a>
<a id="__codelineno-17-54" name="__codelineno-17-54" href="#__codelineno-17-54"></a>
<a id="__codelineno-17-55" name="__codelineno-17-55" href="#__codelineno-17-55"></a><span class="gh">diff --git a/third_party/rust/nix/src/sys/ioctl/linux.rs b/third_party/rust/nix/src/sys/ioctl/linux.rs</span>
<a id="__codelineno-17-56" name="__codelineno-17-56" href="#__codelineno-17-56"></a><span class="gh">index 971c9cb3a9..80b8f3f291 100644</span>
<a id="__codelineno-17-57" name="__codelineno-17-57" href="#__codelineno-17-57"></a><span class="gd">--- a/third_party/rust/nix/src/sys/ioctl/linux.rs</span>
<a id="__codelineno-17-58" name="__codelineno-17-58" href="#__codelineno-17-58"></a><span class="gi">+++ b/third_party/rust/nix/src/sys/ioctl/linux.rs</span>
<a id="__codelineno-17-59" name="__codelineno-17-59" href="#__codelineno-17-59"></a><span class="gu">@@ -41,6 +41,7 @@ mod consts {</span>
<a id="__codelineno-17-60" name="__codelineno-17-60" href="#__codelineno-17-60"></a><span class="w"> </span>    target_arch = &quot;s390x&quot;,
<a id="__codelineno-17-61" name="__codelineno-17-61" href="#__codelineno-17-61"></a><span class="w"> </span>    target_arch = &quot;x86_64&quot;,
<a id="__codelineno-17-62" name="__codelineno-17-62" href="#__codelineno-17-62"></a><span class="w"> </span>    target_arch = &quot;aarch64&quot;,
<a id="__codelineno-17-63" name="__codelineno-17-63" href="#__codelineno-17-63"></a><span class="gi">+    target_arch = &quot;loongarch64&quot;,</span>
<a id="__codelineno-17-64" name="__codelineno-17-64" href="#__codelineno-17-64"></a><span class="w"> </span>    target_arch = &quot;riscv32&quot;,
<a id="__codelineno-17-65" name="__codelineno-17-65" href="#__codelineno-17-65"></a><span class="w"> </span>    target_arch = &quot;riscv64&quot;
<a id="__codelineno-17-66" name="__codelineno-17-66" href="#__codelineno-17-66"></a><span class="w"> </span>))]
</code></pre></div>
<p>修改ipc，看文档</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="gd">--- thunderbird-68.7.0.orig/ipc/chromium/src/build/build_config.h</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="gi">+++ thunderbird-68.7.0/ipc/chromium/src/build/build_config.h</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="gu">@@ -101,6 +101,9 @@</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w"> </span>#elif defined(__mips64) &amp;&amp; defined(__LP64__)
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w"> </span>#  define ARCH_CPU_MIPS 1
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w"> </span>#  define ARCH_CPU_64_BITS 1
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="gi">+#elif defined(__loongarch64)</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="gi">+#  define ARCH_CPU_LOONGARCH 1</span>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="gi">+#  define ARCH_CPU_64_BITS 1</span>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="w"> </span>#elif defined(__mips__)
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="w"> </span>#  define ARCH_CPU_MIPS 1
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="w"> </span>#  define ARCH_CPU_32_BITS 1
</code></pre></div>
<p>xpcom一堆，看文档</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="gd">--- thunderbird-68.7.0.orig/xpcom/reflect/xptcall/md/unix/moz.build</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="gi">+++ thunderbird-68.7.0/xpcom/reflect/xptcall/md/unix/moz.build</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="gu">@@ -128,6 +128,13 @@ if CONFIG[&#39;OS_ARCH&#39;] in (&#39;Linux&#39;, &#39;FreeB</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="w"> </span>            ASFLAGS += [
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="w"> </span>                &#39;-fno-integrated-as&#39;,
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="w"> </span>            ]
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="gi">+    if CONFIG[&#39;CPU_ARCH&#39;] == &#39;loongarch64&#39;:</span>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="gi">+        SOURCES += [</span>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="gi">+            &#39;xptcinvoke_asm_loongarch64.S&#39;,</span>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="gi">+            &#39;xptcinvoke_loongarch64.cpp&#39;,</span>
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="gi">+            &#39;xptcstubs_asm_loongarch64.S&#39;,</span>
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a><span class="gi">+            &#39;xptcstubs_loongarch64.cpp&#39;,</span>
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a><span class="gi">+        ]</span>
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a><span class="w"> </span>    if CONFIG[&#39;CPU_ARCH&#39;] == &#39;mips32&#39;:
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a><span class="w"> </span>        SOURCES += [
<a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a><span class="w"> </span>            &#39;xptcinvoke_asm_mips.S&#39;,
<a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a>
<a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a>
<a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a><span class="gd">--- /dev/null</span>
<a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a><span class="gi">+++ thunderbird-68.7.0/xpcom/reflect/xptcall/md/unix/xptc_asm_loongarch_unix.h</span>
<a id="__codelineno-19-21" name="__codelineno-19-21" href="#__codelineno-19-21"></a><span class="gu">@@ -0,0 +1,127 @@</span>
<a id="__codelineno-19-22" name="__codelineno-19-22" href="#__codelineno-19-22"></a><span class="gi">+#ifndef _XPTC_ASM_LOONGARCH_UNIX_H</span>
<a id="__codelineno-19-23" name="__codelineno-19-23" href="#__codelineno-19-23"></a><span class="gi">+#define _XPTC_ASM_LOONGARCH_UNIX_H</span>
<a id="__codelineno-19-24" name="__codelineno-19-24" href="#__codelineno-19-24"></a><span class="gi">+</span>
<a id="__codelineno-19-25" name="__codelineno-19-25" href="#__codelineno-19-25"></a><span class="gi">+</span>
<a id="__codelineno-19-26" name="__codelineno-19-26" href="#__codelineno-19-26"></a><span class="gi">+/*</span>
<a id="__codelineno-19-27" name="__codelineno-19-27" href="#__codelineno-19-27"></a><span class="gi">+ * Symbolic register names</span>
<a id="__codelineno-19-28" name="__codelineno-19-28" href="#__codelineno-19-28"></a><span class="gi">+ */</span>
<a id="__codelineno-19-29" name="__codelineno-19-29" href="#__codelineno-19-29"></a><span class="gi">+# define zero     $r0</span>
<a id="__codelineno-19-30" name="__codelineno-19-30" href="#__codelineno-19-30"></a><span class="gi">+# define ra       $r1</span>
<a id="__codelineno-19-31" name="__codelineno-19-31" href="#__codelineno-19-31"></a><span class="gi">+# define gp       $r2</span>
<a id="__codelineno-19-32" name="__codelineno-19-32" href="#__codelineno-19-32"></a><span class="gi">+# define sp       $r3</span>
<a id="__codelineno-19-33" name="__codelineno-19-33" href="#__codelineno-19-33"></a><span class="gi">+# define a0       $r4</span>
<a id="__codelineno-19-34" name="__codelineno-19-34" href="#__codelineno-19-34"></a><span class="gi">+# define v0       $r4</span>
<a id="__codelineno-19-35" name="__codelineno-19-35" href="#__codelineno-19-35"></a><span class="gi">+# define a1       $r5</span>
<a id="__codelineno-19-36" name="__codelineno-19-36" href="#__codelineno-19-36"></a><span class="gi">+# define v1       $r5</span>
<a id="__codelineno-19-37" name="__codelineno-19-37" href="#__codelineno-19-37"></a><span class="gi">+# define a2       $r6</span>
<a id="__codelineno-19-38" name="__codelineno-19-38" href="#__codelineno-19-38"></a><span class="gi">+# define a3       $r7</span>
<a id="__codelineno-19-39" name="__codelineno-19-39" href="#__codelineno-19-39"></a><span class="gi">+# define a4       $r8</span>
<a id="__codelineno-19-40" name="__codelineno-19-40" href="#__codelineno-19-40"></a><span class="gi">+# define a5       $r9</span>
<a id="__codelineno-19-41" name="__codelineno-19-41" href="#__codelineno-19-41"></a><span class="gi">+# define a6       $r10</span>
<a id="__codelineno-19-42" name="__codelineno-19-42" href="#__codelineno-19-42"></a><span class="gi">+# define a7       $r11</span>
<a id="__codelineno-19-43" name="__codelineno-19-43" href="#__codelineno-19-43"></a><span class="gi">+# define t0       $r12</span>
<a id="__codelineno-19-44" name="__codelineno-19-44" href="#__codelineno-19-44"></a><span class="gi">+# define t1       $r13</span>
<a id="__codelineno-19-45" name="__codelineno-19-45" href="#__codelineno-19-45"></a><span class="gi">+# define t2       $r14</span>
<a id="__codelineno-19-46" name="__codelineno-19-46" href="#__codelineno-19-46"></a><span class="gi">+# define t3       $r15</span>
<a id="__codelineno-19-47" name="__codelineno-19-47" href="#__codelineno-19-47"></a><span class="gi">+# define t4       $r16</span>
<a id="__codelineno-19-48" name="__codelineno-19-48" href="#__codelineno-19-48"></a><span class="gi">+# define t5       $r17</span>
<a id="__codelineno-19-49" name="__codelineno-19-49" href="#__codelineno-19-49"></a><span class="gi">+# define t6       $r18</span>
<a id="__codelineno-19-50" name="__codelineno-19-50" href="#__codelineno-19-50"></a><span class="gi">+# define t7       $r19</span>
<a id="__codelineno-19-51" name="__codelineno-19-51" href="#__codelineno-19-51"></a><span class="gi">+/* # define at       $r19 */</span>
<a id="__codelineno-19-52" name="__codelineno-19-52" href="#__codelineno-19-52"></a><span class="gi">+# define t8       $r20</span>
<a id="__codelineno-19-53" name="__codelineno-19-53" href="#__codelineno-19-53"></a><span class="gi">+# define tp       $r21</span>
<a id="__codelineno-19-54" name="__codelineno-19-54" href="#__codelineno-19-54"></a><span class="gi">+# define fp       $r22</span>
<a id="__codelineno-19-55" name="__codelineno-19-55" href="#__codelineno-19-55"></a><span class="gi">+# define s0       $r23</span>
<a id="__codelineno-19-56" name="__codelineno-19-56" href="#__codelineno-19-56"></a><span class="gi">+# define s1       $r24</span>
<a id="__codelineno-19-57" name="__codelineno-19-57" href="#__codelineno-19-57"></a><span class="gi">+# define s2       $r25</span>
<a id="__codelineno-19-58" name="__codelineno-19-58" href="#__codelineno-19-58"></a><span class="gi">+# define s3       $r26</span>
<a id="__codelineno-19-59" name="__codelineno-19-59" href="#__codelineno-19-59"></a><span class="gi">+# define s4       $r27</span>
<a id="__codelineno-19-60" name="__codelineno-19-60" href="#__codelineno-19-60"></a><span class="gi">+# define s5       $r28</span>
<a id="__codelineno-19-61" name="__codelineno-19-61" href="#__codelineno-19-61"></a><span class="gi">+# define s6       $r29</span>
<a id="__codelineno-19-62" name="__codelineno-19-62" href="#__codelineno-19-62"></a><span class="gi">+# define s7       $r30</span>
<a id="__codelineno-19-63" name="__codelineno-19-63" href="#__codelineno-19-63"></a><span class="gi">+# define s8       $r31</span>
<a id="__codelineno-19-64" name="__codelineno-19-64" href="#__codelineno-19-64"></a><span class="gi">+/* float point registers */</span>
<a id="__codelineno-19-65" name="__codelineno-19-65" href="#__codelineno-19-65"></a><span class="gi">+# define fa0      $f0</span>
<a id="__codelineno-19-66" name="__codelineno-19-66" href="#__codelineno-19-66"></a><span class="gi">+# define fv0      $f0</span>
<a id="__codelineno-19-67" name="__codelineno-19-67" href="#__codelineno-19-67"></a><span class="gi">+# define fa1      $f1</span>
<a id="__codelineno-19-68" name="__codelineno-19-68" href="#__codelineno-19-68"></a><span class="gi">+# define fv1      $f1</span>
<a id="__codelineno-19-69" name="__codelineno-19-69" href="#__codelineno-19-69"></a><span class="gi">+# define fa2      $f2</span>
<a id="__codelineno-19-70" name="__codelineno-19-70" href="#__codelineno-19-70"></a><span class="gi">+# define fa3      $f3</span>
<a id="__codelineno-19-71" name="__codelineno-19-71" href="#__codelineno-19-71"></a><span class="gi">+# define fa4      $f4</span>
<a id="__codelineno-19-72" name="__codelineno-19-72" href="#__codelineno-19-72"></a><span class="gi">+# define fa5      $f5</span>
<a id="__codelineno-19-73" name="__codelineno-19-73" href="#__codelineno-19-73"></a><span class="gi">+# define fa6      $f6</span>
<a id="__codelineno-19-74" name="__codelineno-19-74" href="#__codelineno-19-74"></a><span class="gi">+# define fa7      $f7</span>
<a id="__codelineno-19-75" name="__codelineno-19-75" href="#__codelineno-19-75"></a><span class="gi">+# define ft0      $f8</span>
<a id="__codelineno-19-76" name="__codelineno-19-76" href="#__codelineno-19-76"></a><span class="gi">+# define ft1      $f9</span>
<a id="__codelineno-19-77" name="__codelineno-19-77" href="#__codelineno-19-77"></a><span class="gi">+# define ft2      $f10</span>
<a id="__codelineno-19-78" name="__codelineno-19-78" href="#__codelineno-19-78"></a><span class="gi">+# define ft3      $f11</span>
<a id="__codelineno-19-79" name="__codelineno-19-79" href="#__codelineno-19-79"></a><span class="gi">+# define ft4      $f12</span>
<a id="__codelineno-19-80" name="__codelineno-19-80" href="#__codelineno-19-80"></a><span class="gi">+# define ft5      $f13</span>
<a id="__codelineno-19-81" name="__codelineno-19-81" href="#__codelineno-19-81"></a><span class="gi">+# define ft6      $f14</span>
<a id="__codelineno-19-82" name="__codelineno-19-82" href="#__codelineno-19-82"></a><span class="gi">+# define ft7      $f15</span>
<a id="__codelineno-19-83" name="__codelineno-19-83" href="#__codelineno-19-83"></a><span class="gi">+# define ft8      $f16</span>
<a id="__codelineno-19-84" name="__codelineno-19-84" href="#__codelineno-19-84"></a><span class="gi">+# define ft9      $f17</span>
<a id="__codelineno-19-85" name="__codelineno-19-85" href="#__codelineno-19-85"></a><span class="gi">+# define ft10     $f18</span>
<a id="__codelineno-19-86" name="__codelineno-19-86" href="#__codelineno-19-86"></a><span class="gi">+# define ft11     $f19</span>
<a id="__codelineno-19-87" name="__codelineno-19-87" href="#__codelineno-19-87"></a><span class="gi">+# define ft12     $f20</span>
<a id="__codelineno-19-88" name="__codelineno-19-88" href="#__codelineno-19-88"></a><span class="gi">+# define ft13     $f21</span>
<a id="__codelineno-19-89" name="__codelineno-19-89" href="#__codelineno-19-89"></a><span class="gi">+# define ft14     $f22</span>
<a id="__codelineno-19-90" name="__codelineno-19-90" href="#__codelineno-19-90"></a><span class="gi">+# define ft15     $f23</span>
<a id="__codelineno-19-91" name="__codelineno-19-91" href="#__codelineno-19-91"></a><span class="gi">+# define fs0      $f24</span>
<a id="__codelineno-19-92" name="__codelineno-19-92" href="#__codelineno-19-92"></a><span class="gi">+# define fs1      $f25</span>
<a id="__codelineno-19-93" name="__codelineno-19-93" href="#__codelineno-19-93"></a><span class="gi">+# define fs2      $f26</span>
<a id="__codelineno-19-94" name="__codelineno-19-94" href="#__codelineno-19-94"></a><span class="gi">+# define fs3      $f27</span>
<a id="__codelineno-19-95" name="__codelineno-19-95" href="#__codelineno-19-95"></a><span class="gi">+# define fs4      $f28</span>
<a id="__codelineno-19-96" name="__codelineno-19-96" href="#__codelineno-19-96"></a><span class="gi">+# define fs5      $f29</span>
<a id="__codelineno-19-97" name="__codelineno-19-97" href="#__codelineno-19-97"></a><span class="gi">+# define fs6      $f30</span>
<a id="__codelineno-19-98" name="__codelineno-19-98" href="#__codelineno-19-98"></a><span class="gi">+# define fs7      $f31</span>
<a id="__codelineno-19-99" name="__codelineno-19-99" href="#__codelineno-19-99"></a><span class="gi">+</span>
<a id="__codelineno-19-100" name="__codelineno-19-100" href="#__codelineno-19-100"></a><span class="gi">+</span>
<a id="__codelineno-19-101" name="__codelineno-19-101" href="#__codelineno-19-101"></a><span class="gi">+/*</span>
<a id="__codelineno-19-102" name="__codelineno-19-102" href="#__codelineno-19-102"></a><span class="gi">+ * How to add/sub/load/store/shift pointers</span>
<a id="__codelineno-19-103" name="__codelineno-19-103" href="#__codelineno-19-103"></a><span class="gi">+ */</span>
<a id="__codelineno-19-104" name="__codelineno-19-104" href="#__codelineno-19-104"></a><span class="gi">+#ifdef __loongarch64</span>
<a id="__codelineno-19-105" name="__codelineno-19-105" href="#__codelineno-19-105"></a><span class="gi">+# define PTRLOG 3</span>
<a id="__codelineno-19-106" name="__codelineno-19-106" href="#__codelineno-19-106"></a><span class="gi">+# define SZREG  8</span>
<a id="__codelineno-19-107" name="__codelineno-19-107" href="#__codelineno-19-107"></a><span class="gi">+# define SZFREG 8</span>
<a id="__codelineno-19-108" name="__codelineno-19-108" href="#__codelineno-19-108"></a><span class="gi">+# define REG_L ld.d</span>
<a id="__codelineno-19-109" name="__codelineno-19-109" href="#__codelineno-19-109"></a><span class="gi">+# define REG_S st.d</span>
<a id="__codelineno-19-110" name="__codelineno-19-110" href="#__codelineno-19-110"></a><span class="gi">+# define FREG_L fld.d</span>
<a id="__codelineno-19-111" name="__codelineno-19-111" href="#__codelineno-19-111"></a><span class="gi">+# define FREG_S fst.d</span>
<a id="__codelineno-19-112" name="__codelineno-19-112" href="#__codelineno-19-112"></a><span class="gi">+#else</span>
<a id="__codelineno-19-113" name="__codelineno-19-113" href="#__codelineno-19-113"></a><span class="gi">+# error __loongarch_xlen must equal 32 or 64</span>
<a id="__codelineno-19-114" name="__codelineno-19-114" href="#__codelineno-19-114"></a><span class="gi">+#endif</span>
<a id="__codelineno-19-115" name="__codelineno-19-115" href="#__codelineno-19-115"></a><span class="gi">+</span>
<a id="__codelineno-19-116" name="__codelineno-19-116" href="#__codelineno-19-116"></a><span class="gi">+</span>
<a id="__codelineno-19-117" name="__codelineno-19-117" href="#__codelineno-19-117"></a><span class="gi">+</span>
<a id="__codelineno-19-118" name="__codelineno-19-118" href="#__codelineno-19-118"></a><span class="gi">+/* </span>
<a id="__codelineno-19-119" name="__codelineno-19-119" href="#__codelineno-19-119"></a><span class="gi">+ * Stack alignment </span>
<a id="__codelineno-19-120" name="__codelineno-19-120" href="#__codelineno-19-120"></a><span class="gi">+ */</span>
<a id="__codelineno-19-121" name="__codelineno-19-121" href="#__codelineno-19-121"></a><span class="gi">+#if _LOONGARCH_SIM == _ABILP64 </span>
<a id="__codelineno-19-122" name="__codelineno-19-122" href="#__codelineno-19-122"></a><span class="gi">+# define ALSZ      15</span>
<a id="__codelineno-19-123" name="__codelineno-19-123" href="#__codelineno-19-123"></a><span class="gi">+# define ALMASK    ~15</span>
<a id="__codelineno-19-124" name="__codelineno-19-124" href="#__codelineno-19-124"></a><span class="gi">+#endif</span>
<a id="__codelineno-19-125" name="__codelineno-19-125" href="#__codelineno-19-125"></a><span class="gi">+</span>
<a id="__codelineno-19-126" name="__codelineno-19-126" href="#__codelineno-19-126"></a><span class="gi">+/* </span>
<a id="__codelineno-19-127" name="__codelineno-19-127" href="#__codelineno-19-127"></a><span class="gi">+ * Stack Frame Definitions </span>
<a id="__codelineno-19-128" name="__codelineno-19-128" href="#__codelineno-19-128"></a><span class="gi">+ */</span>
<a id="__codelineno-19-129" name="__codelineno-19-129" href="#__codelineno-19-129"></a><span class="gi">+#if _LOONGARCH_SIM == _ABILP64</span>
<a id="__codelineno-19-130" name="__codelineno-19-130" href="#__codelineno-19-130"></a><span class="gi">+# define NARGSAVE  0 /* No caller responsibilities */</span>
<a id="__codelineno-19-131" name="__codelineno-19-131" href="#__codelineno-19-131"></a><span class="gi">+#else</span>
<a id="__codelineno-19-132" name="__codelineno-19-132" href="#__codelineno-19-132"></a><span class="gi">+#error &quot;unknown. ???:&quot;</span>
<a id="__codelineno-19-133" name="__codelineno-19-133" href="#__codelineno-19-133"></a><span class="gi">+#endif</span>
<a id="__codelineno-19-134" name="__codelineno-19-134" href="#__codelineno-19-134"></a><span class="gi">+</span>
<a id="__codelineno-19-135" name="__codelineno-19-135" href="#__codelineno-19-135"></a><span class="gi">+</span>
<a id="__codelineno-19-136" name="__codelineno-19-136" href="#__codelineno-19-136"></a><span class="gi">+/*</span>
<a id="__codelineno-19-137" name="__codelineno-19-137" href="#__codelineno-19-137"></a><span class="gi">+ * LEAF - declare leaf routine</span>
<a id="__codelineno-19-138" name="__codelineno-19-138" href="#__codelineno-19-138"></a><span class="gi">+ */</span>
<a id="__codelineno-19-139" name="__codelineno-19-139" href="#__codelineno-19-139"></a><span class="gi">+#define LEAF(symbol)                                          \</span>
<a id="__codelineno-19-140" name="__codelineno-19-140" href="#__codelineno-19-140"></a><span class="gi">+        .text;                                                \</span>
<a id="__codelineno-19-141" name="__codelineno-19-141" href="#__codelineno-19-141"></a><span class="gi">+        .globl  symbol;                                       \</span>
<a id="__codelineno-19-142" name="__codelineno-19-142" href="#__codelineno-19-142"></a><span class="gi">+        .align  3;                                            \</span>
<a id="__codelineno-19-143" name="__codelineno-19-143" href="#__codelineno-19-143"></a><span class="gi">+        cfi_startproc ;                                       \</span>
<a id="__codelineno-19-144" name="__codelineno-19-144" href="#__codelineno-19-144"></a><span class="gi">+        .type  symbol,@function;                              \</span>
<a id="__codelineno-19-145" name="__codelineno-19-145" href="#__codelineno-19-145"></a><span class="gi">+symbol:</span>
<a id="__codelineno-19-146" name="__codelineno-19-146" href="#__codelineno-19-146"></a><span class="gi">+</span>
<a id="__codelineno-19-147" name="__codelineno-19-147" href="#__codelineno-19-147"></a><span class="gi">+</span>
<a id="__codelineno-19-148" name="__codelineno-19-148" href="#__codelineno-19-148"></a><span class="gi">+#endif /* _XPTC_ASM_LOONGARCH_UNIX_H */</span>
<a id="__codelineno-19-149" name="__codelineno-19-149" href="#__codelineno-19-149"></a>
<a id="__codelineno-19-150" name="__codelineno-19-150" href="#__codelineno-19-150"></a>
<a id="__codelineno-19-151" name="__codelineno-19-151" href="#__codelineno-19-151"></a><span class="gd">--- /dev/null</span>
<a id="__codelineno-19-152" name="__codelineno-19-152" href="#__codelineno-19-152"></a><span class="gi">+++ thunderbird-68.7.0/xpcom/reflect/xptcall/md/unix/xptcinvoke_asm_loongarch64.S</span>
<a id="__codelineno-19-153" name="__codelineno-19-153" href="#__codelineno-19-153"></a><span class="gu">@@ -0,0 +1,128 @@</span>
<a id="__codelineno-19-154" name="__codelineno-19-154" href="#__codelineno-19-154"></a><span class="gi">+/* -*- Mode: C; tab-width: 8; indent-tabs-mode: nil; c-basic-offset: 4 -*- */</span>
<a id="__codelineno-19-155" name="__codelineno-19-155" href="#__codelineno-19-155"></a><span class="gi">+/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a id="__codelineno-19-156" name="__codelineno-19-156" href="#__codelineno-19-156"></a><span class="gi">+ * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a id="__codelineno-19-157" name="__codelineno-19-157" href="#__codelineno-19-157"></a><span class="gi">+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a id="__codelineno-19-158" name="__codelineno-19-158" href="#__codelineno-19-158"></a><span class="gi">+/* #include &lt;sys/regdef.h&gt; */</span>
<a id="__codelineno-19-159" name="__codelineno-19-159" href="#__codelineno-19-159"></a><span class="gi">+/* #include &lt;sys/asm.h&gt; */</span>
<a id="__codelineno-19-160" name="__codelineno-19-160" href="#__codelineno-19-160"></a><span class="gi">+#include &quot;xptc_asm_loongarch_unix.h&quot;</span>
<a id="__codelineno-19-161" name="__codelineno-19-161" href="#__codelineno-19-161"></a><span class="gi">+</span>
<a id="__codelineno-19-162" name="__codelineno-19-162" href="#__codelineno-19-162"></a><span class="gi">+.text</span>
<a id="__codelineno-19-163" name="__codelineno-19-163" href="#__codelineno-19-163"></a><span class="gi">+.globl  invoke_count_words</span>
<a id="__codelineno-19-164" name="__codelineno-19-164" href="#__codelineno-19-164"></a><span class="gi">+.globl  invoke_copy_to_stack</span>
<a id="__codelineno-19-165" name="__codelineno-19-165" href="#__codelineno-19-165"></a><span class="gi">+</span>
<a id="__codelineno-19-166" name="__codelineno-19-166" href="#__codelineno-19-166"></a><span class="gi">+# a0, a1, a2, a3, s0, ra, gp</span>
<a id="__codelineno-19-167" name="__codelineno-19-167" href="#__codelineno-19-167"></a><span class="gi">+#define LOCALSZ 7</span>
<a id="__codelineno-19-168" name="__codelineno-19-168" href="#__codelineno-19-168"></a><span class="gi">+#define FRAMESZ  ((((NARGSAVE + LOCALSZ) * SZREG) + ALSZ) &amp; ALMASK)</span>
<a id="__codelineno-19-169" name="__codelineno-19-169" href="#__codelineno-19-169"></a><span class="gi">+</span>
<a id="__codelineno-19-170" name="__codelineno-19-170" href="#__codelineno-19-170"></a><span class="gi">+#define RAOFF (FRAMESZ -(1 * SZREG))</span>
<a id="__codelineno-19-171" name="__codelineno-19-171" href="#__codelineno-19-171"></a><span class="gi">+#define A0OFF (FRAMESZ -(2 * SZREG))</span>
<a id="__codelineno-19-172" name="__codelineno-19-172" href="#__codelineno-19-172"></a><span class="gi">+#define A1OFF (FRAMESZ -(3 * SZREG))</span>
<a id="__codelineno-19-173" name="__codelineno-19-173" href="#__codelineno-19-173"></a><span class="gi">+#define A2OFF (FRAMESZ -(4 * SZREG))</span>
<a id="__codelineno-19-174" name="__codelineno-19-174" href="#__codelineno-19-174"></a><span class="gi">+#define A3OFF (FRAMESZ -(5 * SZREG))</span>
<a id="__codelineno-19-175" name="__codelineno-19-175" href="#__codelineno-19-175"></a><span class="gi">+#define S0OFF (FRAMESZ -(6 * SZREG))</span>
<a id="__codelineno-19-176" name="__codelineno-19-176" href="#__codelineno-19-176"></a><span class="gi">+#define GPOFF (FRAMESZ -(7 * SZREG))</span>
<a id="__codelineno-19-177" name="__codelineno-19-177" href="#__codelineno-19-177"></a><span class="gi">+</span>
<a id="__codelineno-19-178" name="__codelineno-19-178" href="#__codelineno-19-178"></a><span class="gi">+#</span>
<a id="__codelineno-19-179" name="__codelineno-19-179" href="#__codelineno-19-179"></a><span class="gi">+# _NS_InvokeByIndex(that, methodIndex, paramCount, params)</span>
<a id="__codelineno-19-180" name="__codelineno-19-180" href="#__codelineno-19-180"></a><span class="gi">+#                      a0       a1          a2         a3</span>
<a id="__codelineno-19-181" name="__codelineno-19-181" href="#__codelineno-19-181"></a><span class="gi">+</span>
<a id="__codelineno-19-182" name="__codelineno-19-182" href="#__codelineno-19-182"></a><span class="gi">+    .text;</span>
<a id="__codelineno-19-183" name="__codelineno-19-183" href="#__codelineno-19-183"></a><span class="gi">+    .globl _NS_InvokeByIndex;</span>
<a id="__codelineno-19-184" name="__codelineno-19-184" href="#__codelineno-19-184"></a><span class="gi">+    .align 2;</span>
<a id="__codelineno-19-185" name="__codelineno-19-185" href="#__codelineno-19-185"></a><span class="gi">+    .type _NS_InvokeByIndex,@function;</span>
<a id="__codelineno-19-186" name="__codelineno-19-186" href="#__codelineno-19-186"></a><span class="gi">+_NS_InvokeByIndex:</span>
<a id="__codelineno-19-187" name="__codelineno-19-187" href="#__codelineno-19-187"></a><span class="gi">+    addi.d    t0, zero, FRAMESZ</span>
<a id="__codelineno-19-188" name="__codelineno-19-188" href="#__codelineno-19-188"></a><span class="gi">+    sub.d     sp, sp, t0</span>
<a id="__codelineno-19-189" name="__codelineno-19-189" href="#__codelineno-19-189"></a><span class="gi">+</span>
<a id="__codelineno-19-190" name="__codelineno-19-190" href="#__codelineno-19-190"></a><span class="gi">+    st.d      ra, sp, RAOFF</span>
<a id="__codelineno-19-191" name="__codelineno-19-191" href="#__codelineno-19-191"></a><span class="gi">+    st.d      a0, sp, A0OFF</span>
<a id="__codelineno-19-192" name="__codelineno-19-192" href="#__codelineno-19-192"></a><span class="gi">+    st.d      a1, sp, A1OFF</span>
<a id="__codelineno-19-193" name="__codelineno-19-193" href="#__codelineno-19-193"></a><span class="gi">+    st.d      a2, sp, A2OFF</span>
<a id="__codelineno-19-194" name="__codelineno-19-194" href="#__codelineno-19-194"></a><span class="gi">+    st.d      a3, sp, A3OFF</span>
<a id="__codelineno-19-195" name="__codelineno-19-195" href="#__codelineno-19-195"></a><span class="gi">+    st.d      s0, sp, S0OFF</span>
<a id="__codelineno-19-196" name="__codelineno-19-196" href="#__codelineno-19-196"></a><span class="gi">+</span>
<a id="__codelineno-19-197" name="__codelineno-19-197" href="#__codelineno-19-197"></a><span class="gi">+    # invoke_count_words(paramCount, params)</span>
<a id="__codelineno-19-198" name="__codelineno-19-198" href="#__codelineno-19-198"></a><span class="gi">+    addi.d    a0, a2, 0</span>
<a id="__codelineno-19-199" name="__codelineno-19-199" href="#__codelineno-19-199"></a><span class="gi">+    addi.d    a1, a3, 0</span>
<a id="__codelineno-19-200" name="__codelineno-19-200" href="#__codelineno-19-200"></a><span class="gi">+    bl        invoke_count_words</span>
<a id="__codelineno-19-201" name="__codelineno-19-201" href="#__codelineno-19-201"></a><span class="gi">+</span>
<a id="__codelineno-19-202" name="__codelineno-19-202" href="#__codelineno-19-202"></a><span class="gi">+    # invoke_copy_to_stack(uint32_t* d, uint32_t paramCount,</span>
<a id="__codelineno-19-203" name="__codelineno-19-203" href="#__codelineno-19-203"></a><span class="gi">+    #                      nsXPTCVariant* s, uint32_t *reg)</span>
<a id="__codelineno-19-204" name="__codelineno-19-204" href="#__codelineno-19-204"></a><span class="gi">+</span>
<a id="__codelineno-19-205" name="__codelineno-19-205" href="#__codelineno-19-205"></a><span class="gi">+    # save sp before we copy the params to the stack</span>
<a id="__codelineno-19-206" name="__codelineno-19-206" href="#__codelineno-19-206"></a><span class="gi">+    addi.d    t0, sp, 0</span>
<a id="__codelineno-19-207" name="__codelineno-19-207" href="#__codelineno-19-207"></a><span class="gi">+</span>
<a id="__codelineno-19-208" name="__codelineno-19-208" href="#__codelineno-19-208"></a><span class="gi">+    # assume full size of 16 bytes per param to be safe</span>
<a id="__codelineno-19-209" name="__codelineno-19-209" href="#__codelineno-19-209"></a><span class="gi">+    slli.d    v0, v0, 4     # 16 bytes * num params</span>
<a id="__codelineno-19-210" name="__codelineno-19-210" href="#__codelineno-19-210"></a><span class="gi">+    sub.d     sp, sp, v0    # make room</span>
<a id="__codelineno-19-211" name="__codelineno-19-211" href="#__codelineno-19-211"></a><span class="gi">+    addi.d    a0, sp, 0     # a0 - param stack address</span>
<a id="__codelineno-19-212" name="__codelineno-19-212" href="#__codelineno-19-212"></a><span class="gi">+</span>
<a id="__codelineno-19-213" name="__codelineno-19-213" href="#__codelineno-19-213"></a><span class="gi">+    ld.d      a1, t0, A2OFF  # a1 - paramCount</span>
<a id="__codelineno-19-214" name="__codelineno-19-214" href="#__codelineno-19-214"></a><span class="gi">+    ld.d      a2, t0, A3OFF  # a2 - params</span>
<a id="__codelineno-19-215" name="__codelineno-19-215" href="#__codelineno-19-215"></a><span class="gi">+</span>
<a id="__codelineno-19-216" name="__codelineno-19-216" href="#__codelineno-19-216"></a><span class="gi">+    # create temporary stack space to write int and fp regs</span>
<a id="__codelineno-19-217" name="__codelineno-19-217" href="#__codelineno-19-217"></a><span class="gi">+    addi.d    t1, zero, 128</span>
<a id="__codelineno-19-218" name="__codelineno-19-218" href="#__codelineno-19-218"></a><span class="gi">+    sub.d     sp, sp, t1      # 128 = 16 regs of 8 bytes</span>
<a id="__codelineno-19-219" name="__codelineno-19-219" href="#__codelineno-19-219"></a><span class="gi">+    addi.d    a3, sp, 0</span>
<a id="__codelineno-19-220" name="__codelineno-19-220" href="#__codelineno-19-220"></a><span class="gi">+</span>
<a id="__codelineno-19-221" name="__codelineno-19-221" href="#__codelineno-19-221"></a><span class="gi">+    # save the old sp and save the arg stack</span>
<a id="__codelineno-19-222" name="__codelineno-19-222" href="#__codelineno-19-222"></a><span class="gi">+    addi.d    t1, zero, 16</span>
<a id="__codelineno-19-223" name="__codelineno-19-223" href="#__codelineno-19-223"></a><span class="gi">+    sub.d     sp, sp, t1</span>
<a id="__codelineno-19-224" name="__codelineno-19-224" href="#__codelineno-19-224"></a><span class="gi">+    st.d      t0, sp, 0</span>
<a id="__codelineno-19-225" name="__codelineno-19-225" href="#__codelineno-19-225"></a><span class="gi">+    st.d      a0, sp, 8</span>
<a id="__codelineno-19-226" name="__codelineno-19-226" href="#__codelineno-19-226"></a><span class="gi">+</span>
<a id="__codelineno-19-227" name="__codelineno-19-227" href="#__codelineno-19-227"></a><span class="gi">+    # copy the param into the stack areas</span>
<a id="__codelineno-19-228" name="__codelineno-19-228" href="#__codelineno-19-228"></a><span class="gi">+    bl        invoke_copy_to_stack</span>
<a id="__codelineno-19-229" name="__codelineno-19-229" href="#__codelineno-19-229"></a><span class="gi">+</span>
<a id="__codelineno-19-230" name="__codelineno-19-230" href="#__codelineno-19-230"></a><span class="gi">+    ld.d      t3, sp, 8    # get previous a0</span>
<a id="__codelineno-19-231" name="__codelineno-19-231" href="#__codelineno-19-231"></a><span class="gi">+    ld.d      s0, sp, 0     # get orig sp back and save away our stack pointer</span>
<a id="__codelineno-19-232" name="__codelineno-19-232" href="#__codelineno-19-232"></a><span class="gi">+</span>
<a id="__codelineno-19-233" name="__codelineno-19-233" href="#__codelineno-19-233"></a><span class="gi">+    ld.d      a0, s0, A0OFF  # a0 - that</span>
<a id="__codelineno-19-234" name="__codelineno-19-234" href="#__codelineno-19-234"></a><span class="gi">+    ld.d      a1, s0, A1OFF  # a1 - methodIndex</span>
<a id="__codelineno-19-235" name="__codelineno-19-235" href="#__codelineno-19-235"></a><span class="gi">+</span>
<a id="__codelineno-19-236" name="__codelineno-19-236" href="#__codelineno-19-236"></a><span class="gi">+    # t1 = methodIndex * pow(2, PTRLOG)</span>
<a id="__codelineno-19-237" name="__codelineno-19-237" href="#__codelineno-19-237"></a><span class="gi">+    # (use shift instead of mult)</span>
<a id="__codelineno-19-238" name="__codelineno-19-238" href="#__codelineno-19-238"></a><span class="gi">+    slli.d    t1, a1, PTRLOG</span>
<a id="__codelineno-19-239" name="__codelineno-19-239" href="#__codelineno-19-239"></a><span class="gi">+</span>
<a id="__codelineno-19-240" name="__codelineno-19-240" href="#__codelineno-19-240"></a><span class="gi">+    # calculate the function we need to jump to</span>
<a id="__codelineno-19-241" name="__codelineno-19-241" href="#__codelineno-19-241"></a><span class="gi">+    ld.d      t7, a0, 0</span>
<a id="__codelineno-19-242" name="__codelineno-19-242" href="#__codelineno-19-242"></a><span class="gi">+    add.d     t7, t7, t1</span>
<a id="__codelineno-19-243" name="__codelineno-19-243" href="#__codelineno-19-243"></a><span class="gi">+    ld.d      t7, t7, 0</span>
<a id="__codelineno-19-244" name="__codelineno-19-244" href="#__codelineno-19-244"></a><span class="gi">+</span>
<a id="__codelineno-19-245" name="__codelineno-19-245" href="#__codelineno-19-245"></a><span class="gi">+    # get register save area from invoke_copy_to_stack</span>
<a id="__codelineno-19-246" name="__codelineno-19-246" href="#__codelineno-19-246"></a><span class="gi">+    addi.d    t1, zero, 128</span>
<a id="__codelineno-19-247" name="__codelineno-19-247" href="#__codelineno-19-247"></a><span class="gi">+    sub.d     t1, t3, t1</span>
<a id="__codelineno-19-248" name="__codelineno-19-248" href="#__codelineno-19-248"></a><span class="gi">+</span>
<a id="__codelineno-19-249" name="__codelineno-19-249" href="#__codelineno-19-249"></a><span class="gi">+    # a1..a7 and fa0..fa7 should now be set to what</span>
<a id="__codelineno-19-250" name="__codelineno-19-250" href="#__codelineno-19-250"></a><span class="gi">+    # invoke_copy_to_stack told us. skip a0</span>
<a id="__codelineno-19-251" name="__codelineno-19-251" href="#__codelineno-19-251"></a><span class="gi">+    # because that&#39;s the &quot;this&quot; pointer</span>
<a id="__codelineno-19-252" name="__codelineno-19-252" href="#__codelineno-19-252"></a><span class="gi">+</span>
<a id="__codelineno-19-253" name="__codelineno-19-253" href="#__codelineno-19-253"></a><span class="gi">+    ld.d      a1, t1, 0</span>
<a id="__codelineno-19-254" name="__codelineno-19-254" href="#__codelineno-19-254"></a><span class="gi">+    ld.d      a2, t1, 8</span>
<a id="__codelineno-19-255" name="__codelineno-19-255" href="#__codelineno-19-255"></a><span class="gi">+    ld.d      a3, t1, 16</span>
<a id="__codelineno-19-256" name="__codelineno-19-256" href="#__codelineno-19-256"></a><span class="gi">+    ld.d      a4, t1, 24</span>
<a id="__codelineno-19-257" name="__codelineno-19-257" href="#__codelineno-19-257"></a><span class="gi">+    ld.d      a5, t1, 32</span>
<a id="__codelineno-19-258" name="__codelineno-19-258" href="#__codelineno-19-258"></a><span class="gi">+    ld.d      a6, t1, 40</span>
<a id="__codelineno-19-259" name="__codelineno-19-259" href="#__codelineno-19-259"></a><span class="gi">+    ld.d      a7, t1, 48</span>
<a id="__codelineno-19-260" name="__codelineno-19-260" href="#__codelineno-19-260"></a><span class="gi">+</span>
<a id="__codelineno-19-261" name="__codelineno-19-261" href="#__codelineno-19-261"></a><span class="gi">+    fld.d     fa0, t1, 56</span>
<a id="__codelineno-19-262" name="__codelineno-19-262" href="#__codelineno-19-262"></a><span class="gi">+    fld.d     fa1, t1, 64</span>
<a id="__codelineno-19-263" name="__codelineno-19-263" href="#__codelineno-19-263"></a><span class="gi">+    fld.d     fa2, t1, 72</span>
<a id="__codelineno-19-264" name="__codelineno-19-264" href="#__codelineno-19-264"></a><span class="gi">+    fld.d     fa3, t1, 80</span>
<a id="__codelineno-19-265" name="__codelineno-19-265" href="#__codelineno-19-265"></a><span class="gi">+    fld.d     fa4, t1, 88</span>
<a id="__codelineno-19-266" name="__codelineno-19-266" href="#__codelineno-19-266"></a><span class="gi">+    fld.d     fa5, t1, 96</span>
<a id="__codelineno-19-267" name="__codelineno-19-267" href="#__codelineno-19-267"></a><span class="gi">+    fld.d     fa6, t1, 104</span>
<a id="__codelineno-19-268" name="__codelineno-19-268" href="#__codelineno-19-268"></a><span class="gi">+    fld.d     fa7, t1, 112</span>
<a id="__codelineno-19-269" name="__codelineno-19-269" href="#__codelineno-19-269"></a><span class="gi">+</span>
<a id="__codelineno-19-270" name="__codelineno-19-270" href="#__codelineno-19-270"></a><span class="gi">+    # create the stack pointer for the function</span>
<a id="__codelineno-19-271" name="__codelineno-19-271" href="#__codelineno-19-271"></a><span class="gi">+    addi.d    sp, t3, 0</span>
<a id="__codelineno-19-272" name="__codelineno-19-272" href="#__codelineno-19-272"></a><span class="gi">+</span>
<a id="__codelineno-19-273" name="__codelineno-19-273" href="#__codelineno-19-273"></a><span class="gi">+    jirl      ra, t7, 0</span>
<a id="__codelineno-19-274" name="__codelineno-19-274" href="#__codelineno-19-274"></a><span class="gi">+</span>
<a id="__codelineno-19-275" name="__codelineno-19-275" href="#__codelineno-19-275"></a><span class="gi">+    # restore stack pointer.</span>
<a id="__codelineno-19-276" name="__codelineno-19-276" href="#__codelineno-19-276"></a><span class="gi">+    addi.d    sp, s0, 0</span>
<a id="__codelineno-19-277" name="__codelineno-19-277" href="#__codelineno-19-277"></a><span class="gi">+</span>
<a id="__codelineno-19-278" name="__codelineno-19-278" href="#__codelineno-19-278"></a><span class="gi">+    ld.d      ra, sp, RAOFF</span>
<a id="__codelineno-19-279" name="__codelineno-19-279" href="#__codelineno-19-279"></a><span class="gi">+    ld.d      s0, sp, S0OFF</span>
<a id="__codelineno-19-280" name="__codelineno-19-280" href="#__codelineno-19-280"></a><span class="gi">+    addi.d    sp, sp, FRAMESZ</span>
<a id="__codelineno-19-281" name="__codelineno-19-281" href="#__codelineno-19-281"></a><span class="gi">+    jirl      zero, ra, 0</span>
<a id="__codelineno-19-282" name="__codelineno-19-282" href="#__codelineno-19-282"></a>
<a id="__codelineno-19-283" name="__codelineno-19-283" href="#__codelineno-19-283"></a>
<a id="__codelineno-19-284" name="__codelineno-19-284" href="#__codelineno-19-284"></a><span class="gd">--- /dev/null</span>
<a id="__codelineno-19-285" name="__codelineno-19-285" href="#__codelineno-19-285"></a><span class="gi">+++ thunderbird-68.7.0/xpcom/reflect/xptcall/md/unix/xptcinvoke_loongarch64.cpp</span>
<a id="__codelineno-19-286" name="__codelineno-19-286" href="#__codelineno-19-286"></a><span class="gu">@@ -0,0 +1,148 @@</span>
<a id="__codelineno-19-287" name="__codelineno-19-287" href="#__codelineno-19-287"></a><span class="gi">+/* -*- Mode: C; tab-width: 8; indent-tabs-mode: nil; c-basic-offset: 4 -*- */</span>
<a id="__codelineno-19-288" name="__codelineno-19-288" href="#__codelineno-19-288"></a><span class="gi">+/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a id="__codelineno-19-289" name="__codelineno-19-289" href="#__codelineno-19-289"></a><span class="gi">+ * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a id="__codelineno-19-290" name="__codelineno-19-290" href="#__codelineno-19-290"></a><span class="gi">+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a id="__codelineno-19-291" name="__codelineno-19-291" href="#__codelineno-19-291"></a><span class="gi">+</span>
<a id="__codelineno-19-292" name="__codelineno-19-292" href="#__codelineno-19-292"></a><span class="gi">+/* Platform specific code to invoke XPCOM methods on native objects */</span>
<a id="__codelineno-19-293" name="__codelineno-19-293" href="#__codelineno-19-293"></a><span class="gi">+</span>
<a id="__codelineno-19-294" name="__codelineno-19-294" href="#__codelineno-19-294"></a><span class="gi">+#include &quot;xptcprivate.h&quot;</span>
<a id="__codelineno-19-295" name="__codelineno-19-295" href="#__codelineno-19-295"></a><span class="gi">+</span>
<a id="__codelineno-19-296" name="__codelineno-19-296" href="#__codelineno-19-296"></a><span class="gi">+#if (_LOONGARCH_SIM != _ABILP64)</span>
<a id="__codelineno-19-297" name="__codelineno-19-297" href="#__codelineno-19-297"></a><span class="gi">+#error &quot;This code is for loongarch lp64 only&quot;</span>
<a id="__codelineno-19-298" name="__codelineno-19-298" href="#__codelineno-19-298"></a><span class="gi">+#endif</span>
<a id="__codelineno-19-299" name="__codelineno-19-299" href="#__codelineno-19-299"></a><span class="gi">+</span>
<a id="__codelineno-19-300" name="__codelineno-19-300" href="#__codelineno-19-300"></a><span class="gi">+extern &quot;C&quot; uint32_t</span>
<a id="__codelineno-19-301" name="__codelineno-19-301" href="#__codelineno-19-301"></a><span class="gi">+invoke_count_words(uint32_t paramCount, nsXPTCVariant* s)</span>
<a id="__codelineno-19-302" name="__codelineno-19-302" href="#__codelineno-19-302"></a><span class="gi">+{</span>
<a id="__codelineno-19-303" name="__codelineno-19-303" href="#__codelineno-19-303"></a><span class="gi">+    return paramCount;</span>
<a id="__codelineno-19-304" name="__codelineno-19-304" href="#__codelineno-19-304"></a><span class="gi">+}</span>
<a id="__codelineno-19-305" name="__codelineno-19-305" href="#__codelineno-19-305"></a><span class="gi">+</span>
<a id="__codelineno-19-306" name="__codelineno-19-306" href="#__codelineno-19-306"></a><span class="gi">+extern &quot;C&quot; void</span>
<a id="__codelineno-19-307" name="__codelineno-19-307" href="#__codelineno-19-307"></a><span class="gi">+invoke_copy_to_stack(uint64_t* d, uint32_t paramCount,</span>
<a id="__codelineno-19-308" name="__codelineno-19-308" href="#__codelineno-19-308"></a><span class="gi">+                     nsXPTCVariant* s, uint64_t *regs)</span>
<a id="__codelineno-19-309" name="__codelineno-19-309" href="#__codelineno-19-309"></a><span class="gi">+{</span>
<a id="__codelineno-19-310" name="__codelineno-19-310" href="#__codelineno-19-310"></a><span class="gi">+#define N_ARG_GPRS       7       /* 8 regs minus 1 for &quot;this&quot; ptr */</span>
<a id="__codelineno-19-311" name="__codelineno-19-311" href="#__codelineno-19-311"></a><span class="gi">+#define N_ARG_FPRS       8</span>
<a id="__codelineno-19-312" name="__codelineno-19-312" href="#__codelineno-19-312"></a><span class="gi">+</span>
<a id="__codelineno-19-313" name="__codelineno-19-313" href="#__codelineno-19-313"></a><span class="gi">+    int fcount = 0;</span>
<a id="__codelineno-19-314" name="__codelineno-19-314" href="#__codelineno-19-314"></a><span class="gi">+    int icount = 0;</span>
<a id="__codelineno-19-315" name="__codelineno-19-315" href="#__codelineno-19-315"></a><span class="gi">+</span>
<a id="__codelineno-19-316" name="__codelineno-19-316" href="#__codelineno-19-316"></a><span class="gi">+    for (uint32_t i = 0; i &lt; paramCount; i++, s++)</span>
<a id="__codelineno-19-317" name="__codelineno-19-317" href="#__codelineno-19-317"></a><span class="gi">+    {</span>
<a id="__codelineno-19-318" name="__codelineno-19-318" href="#__codelineno-19-318"></a><span class="gi">+        if (s-&gt;IsIndirect()) {</span>
<a id="__codelineno-19-319" name="__codelineno-19-319" href="#__codelineno-19-319"></a><span class="gi">+            if (icount &lt; N_ARG_GPRS)</span>
<a id="__codelineno-19-320" name="__codelineno-19-320" href="#__codelineno-19-320"></a><span class="gi">+                regs[icount++] = (uint64_t) &amp;s-&gt;val;</span>
<a id="__codelineno-19-321" name="__codelineno-19-321" href="#__codelineno-19-321"></a><span class="gi">+            else</span>
<a id="__codelineno-19-322" name="__codelineno-19-322" href="#__codelineno-19-322"></a><span class="gi">+                *d++ = (uint64_t) &amp;s-&gt;val;</span>
<a id="__codelineno-19-323" name="__codelineno-19-323" href="#__codelineno-19-323"></a><span class="gi">+            continue;</span>
<a id="__codelineno-19-324" name="__codelineno-19-324" href="#__codelineno-19-324"></a><span class="gi">+        }</span>
<a id="__codelineno-19-325" name="__codelineno-19-325" href="#__codelineno-19-325"></a><span class="gi">+        switch (s-&gt;type) {</span>
<a id="__codelineno-19-326" name="__codelineno-19-326" href="#__codelineno-19-326"></a><span class="gi">+        //</span>
<a id="__codelineno-19-327" name="__codelineno-19-327" href="#__codelineno-19-327"></a><span class="gi">+        // signed types first</span>
<a id="__codelineno-19-328" name="__codelineno-19-328" href="#__codelineno-19-328"></a><span class="gi">+        //</span>
<a id="__codelineno-19-329" name="__codelineno-19-329" href="#__codelineno-19-329"></a><span class="gi">+        case nsXPTType::T_I8:</span>
<a id="__codelineno-19-330" name="__codelineno-19-330" href="#__codelineno-19-330"></a><span class="gi">+            if (icount &lt; N_ARG_GPRS)</span>
<a id="__codelineno-19-331" name="__codelineno-19-331" href="#__codelineno-19-331"></a><span class="gi">+                ((int64_t*)regs)[icount++] = s-&gt;val.i8;</span>
<a id="__codelineno-19-332" name="__codelineno-19-332" href="#__codelineno-19-332"></a><span class="gi">+            else</span>
<a id="__codelineno-19-333" name="__codelineno-19-333" href="#__codelineno-19-333"></a><span class="gi">+                *d++ = s-&gt;val.i8;</span>
<a id="__codelineno-19-334" name="__codelineno-19-334" href="#__codelineno-19-334"></a><span class="gi">+            break;</span>
<a id="__codelineno-19-335" name="__codelineno-19-335" href="#__codelineno-19-335"></a><span class="gi">+        case nsXPTType::T_I16:</span>
<a id="__codelineno-19-336" name="__codelineno-19-336" href="#__codelineno-19-336"></a><span class="gi">+            if (icount &lt; N_ARG_GPRS)</span>
<a id="__codelineno-19-337" name="__codelineno-19-337" href="#__codelineno-19-337"></a><span class="gi">+                ((int64_t*)regs)[icount++] = s-&gt;val.i16;</span>
<a id="__codelineno-19-338" name="__codelineno-19-338" href="#__codelineno-19-338"></a><span class="gi">+            else</span>
<a id="__codelineno-19-339" name="__codelineno-19-339" href="#__codelineno-19-339"></a><span class="gi">+                *d++ = s-&gt;val.i16;</span>
<a id="__codelineno-19-340" name="__codelineno-19-340" href="#__codelineno-19-340"></a><span class="gi">+            break;</span>
<a id="__codelineno-19-341" name="__codelineno-19-341" href="#__codelineno-19-341"></a><span class="gi">+        case nsXPTType::T_I32:</span>
<a id="__codelineno-19-342" name="__codelineno-19-342" href="#__codelineno-19-342"></a><span class="gi">+            if (icount &lt; N_ARG_GPRS)</span>
<a id="__codelineno-19-343" name="__codelineno-19-343" href="#__codelineno-19-343"></a><span class="gi">+                ((int64_t*)regs)[icount++] = s-&gt;val.i32;</span>
<a id="__codelineno-19-344" name="__codelineno-19-344" href="#__codelineno-19-344"></a><span class="gi">+            else</span>
<a id="__codelineno-19-345" name="__codelineno-19-345" href="#__codelineno-19-345"></a><span class="gi">+                *d++ = s-&gt;val.i32;</span>
<a id="__codelineno-19-346" name="__codelineno-19-346" href="#__codelineno-19-346"></a><span class="gi">+            break;</span>
<a id="__codelineno-19-347" name="__codelineno-19-347" href="#__codelineno-19-347"></a><span class="gi">+        case nsXPTType::T_I64:</span>
<a id="__codelineno-19-348" name="__codelineno-19-348" href="#__codelineno-19-348"></a><span class="gi">+            if (icount &lt; N_ARG_GPRS)</span>
<a id="__codelineno-19-349" name="__codelineno-19-349" href="#__codelineno-19-349"></a><span class="gi">+                ((int64_t*)regs)[icount++] = s-&gt;val.i64;</span>
<a id="__codelineno-19-350" name="__codelineno-19-350" href="#__codelineno-19-350"></a><span class="gi">+            else</span>
<a id="__codelineno-19-351" name="__codelineno-19-351" href="#__codelineno-19-351"></a><span class="gi">+                *d++ = s-&gt;val.i64;</span>
<a id="__codelineno-19-352" name="__codelineno-19-352" href="#__codelineno-19-352"></a><span class="gi">+            break;</span>
<a id="__codelineno-19-353" name="__codelineno-19-353" href="#__codelineno-19-353"></a><span class="gi">+        //</span>
<a id="__codelineno-19-354" name="__codelineno-19-354" href="#__codelineno-19-354"></a><span class="gi">+        // unsigned types next</span>
<a id="__codelineno-19-355" name="__codelineno-19-355" href="#__codelineno-19-355"></a><span class="gi">+        //</span>
<a id="__codelineno-19-356" name="__codelineno-19-356" href="#__codelineno-19-356"></a><span class="gi">+        case nsXPTType::T_U8:</span>
<a id="__codelineno-19-357" name="__codelineno-19-357" href="#__codelineno-19-357"></a><span class="gi">+            if (icount &lt; N_ARG_GPRS)</span>
<a id="__codelineno-19-358" name="__codelineno-19-358" href="#__codelineno-19-358"></a><span class="gi">+                regs[icount++] = s-&gt;val.u8;</span>
<a id="__codelineno-19-359" name="__codelineno-19-359" href="#__codelineno-19-359"></a><span class="gi">+            else</span>
<a id="__codelineno-19-360" name="__codelineno-19-360" href="#__codelineno-19-360"></a><span class="gi">+                *d++ = s-&gt;val.u8;</span>
<a id="__codelineno-19-361" name="__codelineno-19-361" href="#__codelineno-19-361"></a><span class="gi">+            break;</span>
<a id="__codelineno-19-362" name="__codelineno-19-362" href="#__codelineno-19-362"></a><span class="gi">+        case nsXPTType::T_U16:</span>
<a id="__codelineno-19-363" name="__codelineno-19-363" href="#__codelineno-19-363"></a><span class="gi">+            if (icount &lt; N_ARG_GPRS)</span>
<a id="__codelineno-19-364" name="__codelineno-19-364" href="#__codelineno-19-364"></a><span class="gi">+                regs[icount++] = s-&gt;val.u16;</span>
<a id="__codelineno-19-365" name="__codelineno-19-365" href="#__codelineno-19-365"></a><span class="gi">+            else</span>
<a id="__codelineno-19-366" name="__codelineno-19-366" href="#__codelineno-19-366"></a><span class="gi">+                *d++ = s-&gt;val.u16;</span>
<a id="__codelineno-19-367" name="__codelineno-19-367" href="#__codelineno-19-367"></a><span class="gi">+            break;</span>
<a id="__codelineno-19-368" name="__codelineno-19-368" href="#__codelineno-19-368"></a><span class="gi">+        case nsXPTType::T_U32:</span>
<a id="__codelineno-19-369" name="__codelineno-19-369" href="#__codelineno-19-369"></a><span class="gi">+            if (icount &lt; N_ARG_GPRS)</span>
<a id="__codelineno-19-370" name="__codelineno-19-370" href="#__codelineno-19-370"></a><span class="gi">+       // 32-bit values need to be sign-extended</span>
<a id="__codelineno-19-371" name="__codelineno-19-371" href="#__codelineno-19-371"></a><span class="gi">+       // in register, so use the signed value.</span>
<a id="__codelineno-19-372" name="__codelineno-19-372" href="#__codelineno-19-372"></a><span class="gi">+                regs[icount++] = s-&gt;val.i32;</span>
<a id="__codelineno-19-373" name="__codelineno-19-373" href="#__codelineno-19-373"></a><span class="gi">+            else</span>
<a id="__codelineno-19-374" name="__codelineno-19-374" href="#__codelineno-19-374"></a><span class="gi">+                *d++ = s-&gt;val.u32;</span>
<a id="__codelineno-19-375" name="__codelineno-19-375" href="#__codelineno-19-375"></a><span class="gi">+            break;</span>
<a id="__codelineno-19-376" name="__codelineno-19-376" href="#__codelineno-19-376"></a><span class="gi">+        case nsXPTType::T_U64:</span>
<a id="__codelineno-19-377" name="__codelineno-19-377" href="#__codelineno-19-377"></a><span class="gi">+            if (icount &lt; N_ARG_GPRS)</span>
<a id="__codelineno-19-378" name="__codelineno-19-378" href="#__codelineno-19-378"></a><span class="gi">+                regs[icount++] = s-&gt;val.u64;</span>
<a id="__codelineno-19-379" name="__codelineno-19-379" href="#__codelineno-19-379"></a><span class="gi">+            else</span>
<a id="__codelineno-19-380" name="__codelineno-19-380" href="#__codelineno-19-380"></a><span class="gi">+                *d++ = s-&gt;val.u64;</span>
<a id="__codelineno-19-381" name="__codelineno-19-381" href="#__codelineno-19-381"></a><span class="gi">+            break;</span>
<a id="__codelineno-19-382" name="__codelineno-19-382" href="#__codelineno-19-382"></a><span class="gi">+        case nsXPTType::T_FLOAT:</span>
<a id="__codelineno-19-383" name="__codelineno-19-383" href="#__codelineno-19-383"></a><span class="gi">+            // the float data formate must not be converted!</span>
<a id="__codelineno-19-384" name="__codelineno-19-384" href="#__codelineno-19-384"></a><span class="gi">+            // Just only copy without conversion.</span>
<a id="__codelineno-19-385" name="__codelineno-19-385" href="#__codelineno-19-385"></a><span class="gi">+            if (fcount &lt; N_ARG_FPRS)</span>
<a id="__codelineno-19-386" name="__codelineno-19-386" href="#__codelineno-19-386"></a><span class="gi">+                *(float*)&amp;regs[(fcount++) + N_ARG_GPRS] = s-&gt;val.f;</span>
<a id="__codelineno-19-387" name="__codelineno-19-387" href="#__codelineno-19-387"></a><span class="gi">+            else</span>
<a id="__codelineno-19-388" name="__codelineno-19-388" href="#__codelineno-19-388"></a><span class="gi">+                *(float*)d++ = s-&gt;val.f;</span>
<a id="__codelineno-19-389" name="__codelineno-19-389" href="#__codelineno-19-389"></a><span class="gi">+            break;</span>
<a id="__codelineno-19-390" name="__codelineno-19-390" href="#__codelineno-19-390"></a><span class="gi">+        case nsXPTType::T_DOUBLE:</span>
<a id="__codelineno-19-391" name="__codelineno-19-391" href="#__codelineno-19-391"></a><span class="gi">+            if (fcount &lt; N_ARG_FPRS)</span>
<a id="__codelineno-19-392" name="__codelineno-19-392" href="#__codelineno-19-392"></a><span class="gi">+                *(double*)&amp;regs[(fcount++) + N_ARG_GPRS] = s-&gt;val.d;</span>
<a id="__codelineno-19-393" name="__codelineno-19-393" href="#__codelineno-19-393"></a><span class="gi">+            else</span>
<a id="__codelineno-19-394" name="__codelineno-19-394" href="#__codelineno-19-394"></a><span class="gi">+                *(double*)d++ = s-&gt;val.d;</span>
<a id="__codelineno-19-395" name="__codelineno-19-395" href="#__codelineno-19-395"></a><span class="gi">+            break;</span>
<a id="__codelineno-19-396" name="__codelineno-19-396" href="#__codelineno-19-396"></a><span class="gi">+        case nsXPTType::T_BOOL:</span>
<a id="__codelineno-19-397" name="__codelineno-19-397" href="#__codelineno-19-397"></a><span class="gi">+            if (icount &lt; N_ARG_GPRS)</span>
<a id="__codelineno-19-398" name="__codelineno-19-398" href="#__codelineno-19-398"></a><span class="gi">+                regs[icount++] = s-&gt;val.b;</span>
<a id="__codelineno-19-399" name="__codelineno-19-399" href="#__codelineno-19-399"></a><span class="gi">+            else</span>
<a id="__codelineno-19-400" name="__codelineno-19-400" href="#__codelineno-19-400"></a><span class="gi">+                *d++ = s-&gt;val.b;</span>
<a id="__codelineno-19-401" name="__codelineno-19-401" href="#__codelineno-19-401"></a><span class="gi">+            break;</span>
<a id="__codelineno-19-402" name="__codelineno-19-402" href="#__codelineno-19-402"></a><span class="gi">+        case nsXPTType::T_CHAR:</span>
<a id="__codelineno-19-403" name="__codelineno-19-403" href="#__codelineno-19-403"></a><span class="gi">+            if (icount &lt; N_ARG_GPRS)</span>
<a id="__codelineno-19-404" name="__codelineno-19-404" href="#__codelineno-19-404"></a><span class="gi">+                regs[icount++] = s-&gt;val.c;</span>
<a id="__codelineno-19-405" name="__codelineno-19-405" href="#__codelineno-19-405"></a><span class="gi">+            else</span>
<a id="__codelineno-19-406" name="__codelineno-19-406" href="#__codelineno-19-406"></a><span class="gi">+                *d++ = s-&gt;val.c;</span>
<a id="__codelineno-19-407" name="__codelineno-19-407" href="#__codelineno-19-407"></a><span class="gi">+            break;</span>
<a id="__codelineno-19-408" name="__codelineno-19-408" href="#__codelineno-19-408"></a><span class="gi">+        case nsXPTType::T_WCHAR:</span>
<a id="__codelineno-19-409" name="__codelineno-19-409" href="#__codelineno-19-409"></a><span class="gi">+            if (icount &lt; N_ARG_GPRS)</span>
<a id="__codelineno-19-410" name="__codelineno-19-410" href="#__codelineno-19-410"></a><span class="gi">+                regs[icount++] = s-&gt;val.wc;</span>
<a id="__codelineno-19-411" name="__codelineno-19-411" href="#__codelineno-19-411"></a><span class="gi">+            else</span>
<a id="__codelineno-19-412" name="__codelineno-19-412" href="#__codelineno-19-412"></a><span class="gi">+                *d++ = s-&gt;val.wc;</span>
<a id="__codelineno-19-413" name="__codelineno-19-413" href="#__codelineno-19-413"></a><span class="gi">+            break;</span>
<a id="__codelineno-19-414" name="__codelineno-19-414" href="#__codelineno-19-414"></a><span class="gi">+        default:</span>
<a id="__codelineno-19-415" name="__codelineno-19-415" href="#__codelineno-19-415"></a><span class="gi">+            // all the others are plain pointer types</span>
<a id="__codelineno-19-416" name="__codelineno-19-416" href="#__codelineno-19-416"></a><span class="gi">+            if (icount &lt; N_ARG_GPRS)</span>
<a id="__codelineno-19-417" name="__codelineno-19-417" href="#__codelineno-19-417"></a><span class="gi">+                regs[icount++] = (uint64_t)s-&gt;val.p;</span>
<a id="__codelineno-19-418" name="__codelineno-19-418" href="#__codelineno-19-418"></a><span class="gi">+            else</span>
<a id="__codelineno-19-419" name="__codelineno-19-419" href="#__codelineno-19-419"></a><span class="gi">+               *d++ = (uint64_t)s-&gt;val.p;</span>
<a id="__codelineno-19-420" name="__codelineno-19-420" href="#__codelineno-19-420"></a><span class="gi">+            break;</span>
<a id="__codelineno-19-421" name="__codelineno-19-421" href="#__codelineno-19-421"></a><span class="gi">+        }</span>
<a id="__codelineno-19-422" name="__codelineno-19-422" href="#__codelineno-19-422"></a><span class="gi">+    }</span>
<a id="__codelineno-19-423" name="__codelineno-19-423" href="#__codelineno-19-423"></a><span class="gi">+}</span>
<a id="__codelineno-19-424" name="__codelineno-19-424" href="#__codelineno-19-424"></a><span class="gi">+</span>
<a id="__codelineno-19-425" name="__codelineno-19-425" href="#__codelineno-19-425"></a><span class="gi">+extern &quot;C&quot; nsresult _NS_InvokeByIndex(nsISupports* that, uint32_t methodIndex,</span>
<a id="__codelineno-19-426" name="__codelineno-19-426" href="#__codelineno-19-426"></a><span class="gi">+                                        uint32_t paramCount,</span>
<a id="__codelineno-19-427" name="__codelineno-19-427" href="#__codelineno-19-427"></a><span class="gi">+                                        nsXPTCVariant* params);</span>
<a id="__codelineno-19-428" name="__codelineno-19-428" href="#__codelineno-19-428"></a><span class="gi">+</span>
<a id="__codelineno-19-429" name="__codelineno-19-429" href="#__codelineno-19-429"></a><span class="gi">+EXPORT_XPCOM_API(nsresult)</span>
<a id="__codelineno-19-430" name="__codelineno-19-430" href="#__codelineno-19-430"></a><span class="gi">+NS_InvokeByIndex(nsISupports* that, uint32_t methodIndex,</span>
<a id="__codelineno-19-431" name="__codelineno-19-431" href="#__codelineno-19-431"></a><span class="gi">+                   uint32_t paramCount, nsXPTCVariant* params)</span>
<a id="__codelineno-19-432" name="__codelineno-19-432" href="#__codelineno-19-432"></a><span class="gi">+{</span>
<a id="__codelineno-19-433" name="__codelineno-19-433" href="#__codelineno-19-433"></a><span class="gi">+    return _NS_InvokeByIndex(that, methodIndex, paramCount, params);</span>
<a id="__codelineno-19-434" name="__codelineno-19-434" href="#__codelineno-19-434"></a><span class="gi">+}</span>
<a id="__codelineno-19-435" name="__codelineno-19-435" href="#__codelineno-19-435"></a>
<a id="__codelineno-19-436" name="__codelineno-19-436" href="#__codelineno-19-436"></a>
<a id="__codelineno-19-437" name="__codelineno-19-437" href="#__codelineno-19-437"></a><span class="gd">--- /dev/null</span>
<a id="__codelineno-19-438" name="__codelineno-19-438" href="#__codelineno-19-438"></a><span class="gi">+++ thunderbird-68.7.0/xpcom/reflect/xptcall/md/unix/xptcstubs_asm_loongarch64.S</span>
<a id="__codelineno-19-439" name="__codelineno-19-439" href="#__codelineno-19-439"></a><span class="gu">@@ -0,0 +1,113 @@</span>
<a id="__codelineno-19-440" name="__codelineno-19-440" href="#__codelineno-19-440"></a><span class="gi">+/* -*- Mode: C; tab-width: 8; indent-tabs-mode: nil; c-basic-offset: 4 -*- */</span>
<a id="__codelineno-19-441" name="__codelineno-19-441" href="#__codelineno-19-441"></a><span class="gi">+/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a id="__codelineno-19-442" name="__codelineno-19-442" href="#__codelineno-19-442"></a><span class="gi">+ * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a id="__codelineno-19-443" name="__codelineno-19-443" href="#__codelineno-19-443"></a><span class="gi">+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a id="__codelineno-19-444" name="__codelineno-19-444" href="#__codelineno-19-444"></a><span class="gi">+/* #include &lt;sys/regdef.h&gt; */</span>
<a id="__codelineno-19-445" name="__codelineno-19-445" href="#__codelineno-19-445"></a><span class="gi">+/* #include &lt;sys/asm.h&gt; */</span>
<a id="__codelineno-19-446" name="__codelineno-19-446" href="#__codelineno-19-446"></a><span class="gi">+#include &quot;xptc_asm_loongarch_unix.h&quot;</span>
<a id="__codelineno-19-447" name="__codelineno-19-447" href="#__codelineno-19-447"></a><span class="gi">+</span>
<a id="__codelineno-19-448" name="__codelineno-19-448" href="#__codelineno-19-448"></a><span class="gi">+#define LOCALSZ 16</span>
<a id="__codelineno-19-449" name="__codelineno-19-449" href="#__codelineno-19-449"></a><span class="gi">+#define FRAMESZ ((((NARGSAVE + LOCALSZ) * SZREG) + ALSZ) &amp; ALMASK)</span>
<a id="__codelineno-19-450" name="__codelineno-19-450" href="#__codelineno-19-450"></a><span class="gi">+</span>
<a id="__codelineno-19-451" name="__codelineno-19-451" href="#__codelineno-19-451"></a><span class="gi">+#define A1OFF (FRAMESZ - (8 * SZREG))</span>
<a id="__codelineno-19-452" name="__codelineno-19-452" href="#__codelineno-19-452"></a><span class="gi">+#define A2OFF (FRAMESZ - (7 * SZREG))</span>
<a id="__codelineno-19-453" name="__codelineno-19-453" href="#__codelineno-19-453"></a><span class="gi">+#define A3OFF (FRAMESZ - (6 * SZREG))</span>
<a id="__codelineno-19-454" name="__codelineno-19-454" href="#__codelineno-19-454"></a><span class="gi">+#define A4OFF (FRAMESZ - (5 * SZREG))</span>
<a id="__codelineno-19-455" name="__codelineno-19-455" href="#__codelineno-19-455"></a><span class="gi">+#define A5OFF (FRAMESZ - (4 * SZREG))</span>
<a id="__codelineno-19-456" name="__codelineno-19-456" href="#__codelineno-19-456"></a><span class="gi">+#define A6OFF (FRAMESZ - (3 * SZREG))</span>
<a id="__codelineno-19-457" name="__codelineno-19-457" href="#__codelineno-19-457"></a><span class="gi">+#define A7OFF (FRAMESZ - (2 * SZREG))</span>
<a id="__codelineno-19-458" name="__codelineno-19-458" href="#__codelineno-19-458"></a><span class="gi">+#define RAOFF (FRAMESZ - (1 * SZREG))</span>
<a id="__codelineno-19-459" name="__codelineno-19-459" href="#__codelineno-19-459"></a><span class="gi">+</span>
<a id="__codelineno-19-460" name="__codelineno-19-460" href="#__codelineno-19-460"></a><span class="gi">+#define FA0OFF (FRAMESZ - (16 * SZREG))</span>
<a id="__codelineno-19-461" name="__codelineno-19-461" href="#__codelineno-19-461"></a><span class="gi">+#define FA1OFF (FRAMESZ - (15 * SZREG))</span>
<a id="__codelineno-19-462" name="__codelineno-19-462" href="#__codelineno-19-462"></a><span class="gi">+#define FA2OFF (FRAMESZ - (14 * SZREG))</span>
<a id="__codelineno-19-463" name="__codelineno-19-463" href="#__codelineno-19-463"></a><span class="gi">+#define FA3OFF (FRAMESZ - (13 * SZREG))</span>
<a id="__codelineno-19-464" name="__codelineno-19-464" href="#__codelineno-19-464"></a><span class="gi">+#define FA4OFF (FRAMESZ - (12 * SZREG))</span>
<a id="__codelineno-19-465" name="__codelineno-19-465" href="#__codelineno-19-465"></a><span class="gi">+#define FA5OFF (FRAMESZ - (11 * SZREG))</span>
<a id="__codelineno-19-466" name="__codelineno-19-466" href="#__codelineno-19-466"></a><span class="gi">+#define FA6OFF (FRAMESZ - (10 * SZREG))</span>
<a id="__codelineno-19-467" name="__codelineno-19-467" href="#__codelineno-19-467"></a><span class="gi">+#define FA7OFF (FRAMESZ - (9 * SZREG))</span>
<a id="__codelineno-19-468" name="__codelineno-19-468" href="#__codelineno-19-468"></a><span class="gi">+</span>
<a id="__codelineno-19-469" name="__codelineno-19-469" href="#__codelineno-19-469"></a><span class="gi">+#define SENTINEL_ENTRY(n)         /* defined in cpp file, not here */</span>
<a id="__codelineno-19-470" name="__codelineno-19-470" href="#__codelineno-19-470"></a><span class="gi">+</span>
<a id="__codelineno-19-471" name="__codelineno-19-471" href="#__codelineno-19-471"></a><span class="gi">+#define STUB_ENTRY(x)                                        \</span>
<a id="__codelineno-19-472" name="__codelineno-19-472" href="#__codelineno-19-472"></a><span class="gi">+    .if x &lt; 10;                                              \</span>
<a id="__codelineno-19-473" name="__codelineno-19-473" href="#__codelineno-19-473"></a><span class="gi">+    .globl    _ZN14nsXPTCStubBase5Stub ##x ##Ev;             \</span>
<a id="__codelineno-19-474" name="__codelineno-19-474" href="#__codelineno-19-474"></a><span class="gi">+    .type     _ZN14nsXPTCStubBase5Stub ##x ##Ev,@function;   \</span>
<a id="__codelineno-19-475" name="__codelineno-19-475" href="#__codelineno-19-475"></a><span class="gi">+_ZN14nsXPTCStubBase5Stub ##x ##Ev:;                          \</span>
<a id="__codelineno-19-476" name="__codelineno-19-476" href="#__codelineno-19-476"></a><span class="gi">+    addi.d    t0, zero, FRAMESZ;                             \</span>
<a id="__codelineno-19-477" name="__codelineno-19-477" href="#__codelineno-19-477"></a><span class="gi">+    sub.d     sp, sp, t0;                                    \</span>
<a id="__codelineno-19-478" name="__codelineno-19-478" href="#__codelineno-19-478"></a><span class="gi">+    addi.d    t0, zero, x;                                   \</span>
<a id="__codelineno-19-479" name="__codelineno-19-479" href="#__codelineno-19-479"></a><span class="gi">+    b         sharedstub;                                   \</span>
<a id="__codelineno-19-480" name="__codelineno-19-480" href="#__codelineno-19-480"></a><span class="gi">+    .elseif x &lt; 100;                                         \</span>
<a id="__codelineno-19-481" name="__codelineno-19-481" href="#__codelineno-19-481"></a><span class="gi">+    .globl    _ZN14nsXPTCStubBase6Stub ##x ##Ev;             \</span>
<a id="__codelineno-19-482" name="__codelineno-19-482" href="#__codelineno-19-482"></a><span class="gi">+    .type     _ZN14nsXPTCStubBase6Stub ##x ##Ev,@function;   \</span>
<a id="__codelineno-19-483" name="__codelineno-19-483" href="#__codelineno-19-483"></a><span class="gi">+_ZN14nsXPTCStubBase6Stub ##x ##Ev:;                          \</span>
<a id="__codelineno-19-484" name="__codelineno-19-484" href="#__codelineno-19-484"></a><span class="gi">+    addi.d    t0, zero, FRAMESZ;                             \</span>
<a id="__codelineno-19-485" name="__codelineno-19-485" href="#__codelineno-19-485"></a><span class="gi">+    sub.d     sp, sp, t0;                                    \</span>
<a id="__codelineno-19-486" name="__codelineno-19-486" href="#__codelineno-19-486"></a><span class="gi">+    addi.d    t0, zero, x;                                   \</span>
<a id="__codelineno-19-487" name="__codelineno-19-487" href="#__codelineno-19-487"></a><span class="gi">+    b         sharedstub;                                   \</span>
<a id="__codelineno-19-488" name="__codelineno-19-488" href="#__codelineno-19-488"></a><span class="gi">+    .elseif x &lt; 1000;                                        \</span>
<a id="__codelineno-19-489" name="__codelineno-19-489" href="#__codelineno-19-489"></a><span class="gi">+    .globl    _ZN14nsXPTCStubBase7Stub ##x ##Ev;             \</span>
<a id="__codelineno-19-490" name="__codelineno-19-490" href="#__codelineno-19-490"></a><span class="gi">+    .type     _ZN14nsXPTCStubBase7Stub ##x ##Ev,@function;   \</span>
<a id="__codelineno-19-491" name="__codelineno-19-491" href="#__codelineno-19-491"></a><span class="gi">+_ZN14nsXPTCStubBase7Stub ##x ##Ev:;                          \</span>
<a id="__codelineno-19-492" name="__codelineno-19-492" href="#__codelineno-19-492"></a><span class="gi">+    addi.d    t0, zero, FRAMESZ;                             \</span>
<a id="__codelineno-19-493" name="__codelineno-19-493" href="#__codelineno-19-493"></a><span class="gi">+    sub.d     sp, sp, t0;                                    \</span>
<a id="__codelineno-19-494" name="__codelineno-19-494" href="#__codelineno-19-494"></a><span class="gi">+    addi.d    t0, zero, x;                                   \</span>
<a id="__codelineno-19-495" name="__codelineno-19-495" href="#__codelineno-19-495"></a><span class="gi">+    b         sharedstub;                                   \</span>
<a id="__codelineno-19-496" name="__codelineno-19-496" href="#__codelineno-19-496"></a><span class="gi">+    .else;                                                   \</span>
<a id="__codelineno-19-497" name="__codelineno-19-497" href="#__codelineno-19-497"></a><span class="gi">+    .err;                                                    \</span>
<a id="__codelineno-19-498" name="__codelineno-19-498" href="#__codelineno-19-498"></a><span class="gi">+    .endif</span>
<a id="__codelineno-19-499" name="__codelineno-19-499" href="#__codelineno-19-499"></a><span class="gi">+</span>
<a id="__codelineno-19-500" name="__codelineno-19-500" href="#__codelineno-19-500"></a><span class="gi">+#</span>
<a id="__codelineno-19-501" name="__codelineno-19-501" href="#__codelineno-19-501"></a><span class="gi">+# open a dummy frame for the function entries</span>
<a id="__codelineno-19-502" name="__codelineno-19-502" href="#__codelineno-19-502"></a><span class="gi">+#</span>
<a id="__codelineno-19-503" name="__codelineno-19-503" href="#__codelineno-19-503"></a><span class="gi">+    .text</span>
<a id="__codelineno-19-504" name="__codelineno-19-504" href="#__codelineno-19-504"></a><span class="gi">+    .align   2</span>
<a id="__codelineno-19-505" name="__codelineno-19-505" href="#__codelineno-19-505"></a><span class="gi">+    .type    dummy,@function</span>
<a id="__codelineno-19-506" name="__codelineno-19-506" href="#__codelineno-19-506"></a><span class="gi">+dummy:</span>
<a id="__codelineno-19-507" name="__codelineno-19-507" href="#__codelineno-19-507"></a><span class="gi">+#    .mask    0x90000FF0, RAOFF-FRAMESZ</span>
<a id="__codelineno-19-508" name="__codelineno-19-508" href="#__codelineno-19-508"></a><span class="gi">+#    .fmask   0x000FF000, F19OFF-FRAMESZ</span>
<a id="__codelineno-19-509" name="__codelineno-19-509" href="#__codelineno-19-509"></a><span class="gi">+</span>
<a id="__codelineno-19-510" name="__codelineno-19-510" href="#__codelineno-19-510"></a><span class="gi">+#include &quot;xptcstubsdef.inc&quot;</span>
<a id="__codelineno-19-511" name="__codelineno-19-511" href="#__codelineno-19-511"></a><span class="gi">+</span>
<a id="__codelineno-19-512" name="__codelineno-19-512" href="#__codelineno-19-512"></a><span class="gi">+sharedstub:</span>
<a id="__codelineno-19-513" name="__codelineno-19-513" href="#__codelineno-19-513"></a><span class="gi">+    st.d     a1, sp, A1OFF</span>
<a id="__codelineno-19-514" name="__codelineno-19-514" href="#__codelineno-19-514"></a><span class="gi">+    st.d     a2, sp, A2OFF</span>
<a id="__codelineno-19-515" name="__codelineno-19-515" href="#__codelineno-19-515"></a><span class="gi">+    st.d     a3, sp, A3OFF</span>
<a id="__codelineno-19-516" name="__codelineno-19-516" href="#__codelineno-19-516"></a><span class="gi">+    st.d     a4, sp, A4OFF</span>
<a id="__codelineno-19-517" name="__codelineno-19-517" href="#__codelineno-19-517"></a><span class="gi">+    st.d     a5, sp, A5OFF</span>
<a id="__codelineno-19-518" name="__codelineno-19-518" href="#__codelineno-19-518"></a><span class="gi">+    st.d     a6, sp, A6OFF</span>
<a id="__codelineno-19-519" name="__codelineno-19-519" href="#__codelineno-19-519"></a><span class="gi">+    st.d     a7, sp, A7OFF</span>
<a id="__codelineno-19-520" name="__codelineno-19-520" href="#__codelineno-19-520"></a><span class="gi">+    st.d     ra, sp, RAOFF</span>
<a id="__codelineno-19-521" name="__codelineno-19-521" href="#__codelineno-19-521"></a><span class="gi">+</span>
<a id="__codelineno-19-522" name="__codelineno-19-522" href="#__codelineno-19-522"></a><span class="gi">+    fst.d    fa0, sp, FA0OFF</span>
<a id="__codelineno-19-523" name="__codelineno-19-523" href="#__codelineno-19-523"></a><span class="gi">+    fst.d    fa1, sp, FA1OFF</span>
<a id="__codelineno-19-524" name="__codelineno-19-524" href="#__codelineno-19-524"></a><span class="gi">+    fst.d    fa2, sp, FA2OFF</span>
<a id="__codelineno-19-525" name="__codelineno-19-525" href="#__codelineno-19-525"></a><span class="gi">+    fst.d    fa3, sp, FA3OFF</span>
<a id="__codelineno-19-526" name="__codelineno-19-526" href="#__codelineno-19-526"></a><span class="gi">+    fst.d    fa4, sp, FA4OFF</span>
<a id="__codelineno-19-527" name="__codelineno-19-527" href="#__codelineno-19-527"></a><span class="gi">+    fst.d    fa5, sp, FA5OFF</span>
<a id="__codelineno-19-528" name="__codelineno-19-528" href="#__codelineno-19-528"></a><span class="gi">+    fst.d    fa6, sp, FA6OFF</span>
<a id="__codelineno-19-529" name="__codelineno-19-529" href="#__codelineno-19-529"></a><span class="gi">+    fst.d    fa7, sp, FA7OFF</span>
<a id="__codelineno-19-530" name="__codelineno-19-530" href="#__codelineno-19-530"></a><span class="gi">+</span>
<a id="__codelineno-19-531" name="__codelineno-19-531" href="#__codelineno-19-531"></a><span class="gi">+    # t0 is methodIndex</span>
<a id="__codelineno-19-532" name="__codelineno-19-532" href="#__codelineno-19-532"></a><span class="gi">+    add.d    a1, t0, zero</span>
<a id="__codelineno-19-533" name="__codelineno-19-533" href="#__codelineno-19-533"></a><span class="gi">+</span>
<a id="__codelineno-19-534" name="__codelineno-19-534" href="#__codelineno-19-534"></a><span class="gi">+    # a2 is stack address where extra function params</span>
<a id="__codelineno-19-535" name="__codelineno-19-535" href="#__codelineno-19-535"></a><span class="gi">+    # are stored that do not fit in registers</span>
<a id="__codelineno-19-536" name="__codelineno-19-536" href="#__codelineno-19-536"></a><span class="gi">+    addi.d   a2, sp, FRAMESZ</span>
<a id="__codelineno-19-537" name="__codelineno-19-537" href="#__codelineno-19-537"></a><span class="gi">+</span>
<a id="__codelineno-19-538" name="__codelineno-19-538" href="#__codelineno-19-538"></a><span class="gi">+    # a3 is stack address of a1..a7</span>
<a id="__codelineno-19-539" name="__codelineno-19-539" href="#__codelineno-19-539"></a><span class="gi">+    addi.d   a3, sp, A1OFF</span>
<a id="__codelineno-19-540" name="__codelineno-19-540" href="#__codelineno-19-540"></a><span class="gi">+</span>
<a id="__codelineno-19-541" name="__codelineno-19-541" href="#__codelineno-19-541"></a><span class="gi">+    # a4 is stack address of fa0..fa7</span>
<a id="__codelineno-19-542" name="__codelineno-19-542" href="#__codelineno-19-542"></a><span class="gi">+    addi.d   a4, sp, FA0OFF</span>
<a id="__codelineno-19-543" name="__codelineno-19-543" href="#__codelineno-19-543"></a><span class="gi">+</span>
<a id="__codelineno-19-544" name="__codelineno-19-544" href="#__codelineno-19-544"></a><span class="gi">+    # PrepareAndDispatch(that, methodIndex, args, gprArgs, fpArgs)</span>
<a id="__codelineno-19-545" name="__codelineno-19-545" href="#__codelineno-19-545"></a><span class="gi">+    #                     a0       a1        a2     a3       a4</span>
<a id="__codelineno-19-546" name="__codelineno-19-546" href="#__codelineno-19-546"></a><span class="gi">+    #</span>
<a id="__codelineno-19-547" name="__codelineno-19-547" href="#__codelineno-19-547"></a><span class="gi">+    bl       PrepareAndDispatch</span>
<a id="__codelineno-19-548" name="__codelineno-19-548" href="#__codelineno-19-548"></a><span class="gi">+</span>
<a id="__codelineno-19-549" name="__codelineno-19-549" href="#__codelineno-19-549"></a><span class="gi">+    ld.d     ra, sp, RAOFF</span>
<a id="__codelineno-19-550" name="__codelineno-19-550" href="#__codelineno-19-550"></a><span class="gi">+</span>
<a id="__codelineno-19-551" name="__codelineno-19-551" href="#__codelineno-19-551"></a><span class="gi">+    addi.d   sp, sp, FRAMESZ</span>
<a id="__codelineno-19-552" name="__codelineno-19-552" href="#__codelineno-19-552"></a><span class="gi">+    jirl     zero, ra, 0</span>
<a id="__codelineno-19-553" name="__codelineno-19-553" href="#__codelineno-19-553"></a>
<a id="__codelineno-19-554" name="__codelineno-19-554" href="#__codelineno-19-554"></a>
<a id="__codelineno-19-555" name="__codelineno-19-555" href="#__codelineno-19-555"></a><span class="gd">--- /dev/null</span>
<a id="__codelineno-19-556" name="__codelineno-19-556" href="#__codelineno-19-556"></a><span class="gi">+++ thunderbird-68.7.0/xpcom/reflect/xptcall/md/unix/xptcstubs_loongarch64.cpp</span>
<a id="__codelineno-19-557" name="__codelineno-19-557" href="#__codelineno-19-557"></a><span class="gu">@@ -0,0 +1,196 @@</span>
<a id="__codelineno-19-558" name="__codelineno-19-558" href="#__codelineno-19-558"></a><span class="gi">+/* -*- Mode: C; tab-width: 8; indent-tabs-mode: nil; c-basic-offset: 4 -*- */</span>
<a id="__codelineno-19-559" name="__codelineno-19-559" href="#__codelineno-19-559"></a><span class="gi">+/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a id="__codelineno-19-560" name="__codelineno-19-560" href="#__codelineno-19-560"></a><span class="gi">+ * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a id="__codelineno-19-561" name="__codelineno-19-561" href="#__codelineno-19-561"></a><span class="gi">+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a id="__codelineno-19-562" name="__codelineno-19-562" href="#__codelineno-19-562"></a><span class="gi">+</span>
<a id="__codelineno-19-563" name="__codelineno-19-563" href="#__codelineno-19-563"></a><span class="gi">+#include &quot;xptcprivate.h&quot;</span>
<a id="__codelineno-19-564" name="__codelineno-19-564" href="#__codelineno-19-564"></a><span class="gi">+</span>
<a id="__codelineno-19-565" name="__codelineno-19-565" href="#__codelineno-19-565"></a><span class="gi">+#if (_LOONGARCH_SIM != _ABILP64)</span>
<a id="__codelineno-19-566" name="__codelineno-19-566" href="#__codelineno-19-566"></a><span class="gi">+#error &quot;This code is for loongarch lp64 only&quot;</span>
<a id="__codelineno-19-567" name="__codelineno-19-567" href="#__codelineno-19-567"></a><span class="gi">+#endif</span>
<a id="__codelineno-19-568" name="__codelineno-19-568" href="#__codelineno-19-568"></a><span class="gi">+</span>
<a id="__codelineno-19-569" name="__codelineno-19-569" href="#__codelineno-19-569"></a><span class="gi">+/*</span>
<a id="__codelineno-19-570" name="__codelineno-19-570" href="#__codelineno-19-570"></a><span class="gi">+ * This is for loongarch lp64 ABI</span>
<a id="__codelineno-19-571" name="__codelineno-19-571" href="#__codelineno-19-571"></a><span class="gi">+ *</span>
<a id="__codelineno-19-572" name="__codelineno-19-572" href="#__codelineno-19-572"></a><span class="gi">+ * When we&#39;re called, the &quot;gp&quot; registers are stored in gprData and</span>
<a id="__codelineno-19-573" name="__codelineno-19-573" href="#__codelineno-19-573"></a><span class="gi">+ * the &quot;fp&quot; registers are stored in fprData.  There are 8 regs</span>
<a id="__codelineno-19-574" name="__codelineno-19-574" href="#__codelineno-19-574"></a><span class="gi">+ * available which correspond to the first 7 parameters of the</span>
<a id="__codelineno-19-575" name="__codelineno-19-575" href="#__codelineno-19-575"></a><span class="gi">+ * function and the &quot;this&quot; pointer.  If there are additional parms,</span>
<a id="__codelineno-19-576" name="__codelineno-19-576" href="#__codelineno-19-576"></a><span class="gi">+ * they are stored on the stack at address &quot;args&quot;.</span>
<a id="__codelineno-19-577" name="__codelineno-19-577" href="#__codelineno-19-577"></a><span class="gi">+ *</span>
<a id="__codelineno-19-578" name="__codelineno-19-578" href="#__codelineno-19-578"></a><span class="gi">+ */</span>
<a id="__codelineno-19-579" name="__codelineno-19-579" href="#__codelineno-19-579"></a><span class="gi">+extern &quot;C&quot; nsresult ATTRIBUTE_USED</span>
<a id="__codelineno-19-580" name="__codelineno-19-580" href="#__codelineno-19-580"></a><span class="gi">+PrepareAndDispatch(nsXPTCStubBase* self, uint32_t methodIndex, uint64_t* args,</span>
<a id="__codelineno-19-581" name="__codelineno-19-581" href="#__codelineno-19-581"></a><span class="gi">+                   uint64_t *gprData, double *fprData)</span>
<a id="__codelineno-19-582" name="__codelineno-19-582" href="#__codelineno-19-582"></a><span class="gi">+{</span>
<a id="__codelineno-19-583" name="__codelineno-19-583" href="#__codelineno-19-583"></a><span class="gi">+#define PARAM_BUFFER_COUNT        16</span>
<a id="__codelineno-19-584" name="__codelineno-19-584" href="#__codelineno-19-584"></a><span class="gi">+#define PARAM_GPR_COUNT            7</span>
<a id="__codelineno-19-585" name="__codelineno-19-585" href="#__codelineno-19-585"></a><span class="gi">+#define PARAM_FPR_COUNT            8</span>
<a id="__codelineno-19-586" name="__codelineno-19-586" href="#__codelineno-19-586"></a><span class="gi">+</span>
<a id="__codelineno-19-587" name="__codelineno-19-587" href="#__codelineno-19-587"></a><span class="gi">+    nsXPTCMiniVariant paramBuffer[PARAM_BUFFER_COUNT];</span>
<a id="__codelineno-19-588" name="__codelineno-19-588" href="#__codelineno-19-588"></a><span class="gi">+    nsXPTCMiniVariant* dispatchParams = nullptr;</span>
<a id="__codelineno-19-589" name="__codelineno-19-589" href="#__codelineno-19-589"></a><span class="gi">+    const nsXPTMethodInfo* info;</span>
<a id="__codelineno-19-590" name="__codelineno-19-590" href="#__codelineno-19-590"></a><span class="gi">+    uint8_t paramCount;</span>
<a id="__codelineno-19-591" name="__codelineno-19-591" href="#__codelineno-19-591"></a><span class="gi">+    uint8_t i;</span>
<a id="__codelineno-19-592" name="__codelineno-19-592" href="#__codelineno-19-592"></a><span class="gi">+</span>
<a id="__codelineno-19-593" name="__codelineno-19-593" href="#__codelineno-19-593"></a><span class="gi">+    NS_ASSERTION(self,&quot;no self&quot;);</span>
<a id="__codelineno-19-594" name="__codelineno-19-594" href="#__codelineno-19-594"></a><span class="gi">+</span>
<a id="__codelineno-19-595" name="__codelineno-19-595" href="#__codelineno-19-595"></a><span class="gi">+    self-&gt;mEntry-&gt;GetMethodInfo(uint16_t(methodIndex), &amp;info);</span>
<a id="__codelineno-19-596" name="__codelineno-19-596" href="#__codelineno-19-596"></a><span class="gi">+    NS_ASSERTION(info,&quot;no method info&quot;);</span>
<a id="__codelineno-19-597" name="__codelineno-19-597" href="#__codelineno-19-597"></a><span class="gi">+</span>
<a id="__codelineno-19-598" name="__codelineno-19-598" href="#__codelineno-19-598"></a><span class="gi">+    paramCount = info-&gt;GetParamCount();</span>
<a id="__codelineno-19-599" name="__codelineno-19-599" href="#__codelineno-19-599"></a><span class="gi">+</span>
<a id="__codelineno-19-600" name="__codelineno-19-600" href="#__codelineno-19-600"></a><span class="gi">+    // setup variant array pointer</span>
<a id="__codelineno-19-601" name="__codelineno-19-601" href="#__codelineno-19-601"></a><span class="gi">+    if(paramCount &gt; PARAM_BUFFER_COUNT)</span>
<a id="__codelineno-19-602" name="__codelineno-19-602" href="#__codelineno-19-602"></a><span class="gi">+        dispatchParams = new nsXPTCMiniVariant[paramCount];</span>
<a id="__codelineno-19-603" name="__codelineno-19-603" href="#__codelineno-19-603"></a><span class="gi">+    else</span>
<a id="__codelineno-19-604" name="__codelineno-19-604" href="#__codelineno-19-604"></a><span class="gi">+        dispatchParams = paramBuffer;</span>
<a id="__codelineno-19-605" name="__codelineno-19-605" href="#__codelineno-19-605"></a><span class="gi">+    NS_ASSERTION(dispatchParams,&quot;no place for params&quot;);</span>
<a id="__codelineno-19-606" name="__codelineno-19-606" href="#__codelineno-19-606"></a><span class="gi">+</span>
<a id="__codelineno-19-607" name="__codelineno-19-607" href="#__codelineno-19-607"></a><span class="gi">+    const uint8_t indexOfJSContext = info-&gt;IndexOfJSContext();</span>
<a id="__codelineno-19-608" name="__codelineno-19-608" href="#__codelineno-19-608"></a><span class="gi">+</span>
<a id="__codelineno-19-609" name="__codelineno-19-609" href="#__codelineno-19-609"></a><span class="gi">+    uint64_t* ap = args;</span>
<a id="__codelineno-19-610" name="__codelineno-19-610" href="#__codelineno-19-610"></a><span class="gi">+    uint32_t iCount = 0;</span>
<a id="__codelineno-19-611" name="__codelineno-19-611" href="#__codelineno-19-611"></a><span class="gi">+    uint32_t fCount = 0;</span>
<a id="__codelineno-19-612" name="__codelineno-19-612" href="#__codelineno-19-612"></a><span class="gi">+    for(i = 0; i &lt; paramCount; i++)</span>
<a id="__codelineno-19-613" name="__codelineno-19-613" href="#__codelineno-19-613"></a><span class="gi">+    {</span>
<a id="__codelineno-19-614" name="__codelineno-19-614" href="#__codelineno-19-614"></a><span class="gi">+        const nsXPTParamInfo&amp; param = info-&gt;GetParam(i);</span>
<a id="__codelineno-19-615" name="__codelineno-19-615" href="#__codelineno-19-615"></a><span class="gi">+        const nsXPTType&amp; type = param.GetType();</span>
<a id="__codelineno-19-616" name="__codelineno-19-616" href="#__codelineno-19-616"></a><span class="gi">+        nsXPTCMiniVariant* dp = &amp;dispatchParams[i];</span>
<a id="__codelineno-19-617" name="__codelineno-19-617" href="#__codelineno-19-617"></a><span class="gi">+</span>
<a id="__codelineno-19-618" name="__codelineno-19-618" href="#__codelineno-19-618"></a><span class="gi">+        if (i == indexOfJSContext) {</span>
<a id="__codelineno-19-619" name="__codelineno-19-619" href="#__codelineno-19-619"></a><span class="gi">+            if (iCount &lt; PARAM_GPR_COUNT)</span>
<a id="__codelineno-19-620" name="__codelineno-19-620" href="#__codelineno-19-620"></a><span class="gi">+                iCount++;</span>
<a id="__codelineno-19-621" name="__codelineno-19-621" href="#__codelineno-19-621"></a><span class="gi">+            else</span>
<a id="__codelineno-19-622" name="__codelineno-19-622" href="#__codelineno-19-622"></a><span class="gi">+                ap++;</span>
<a id="__codelineno-19-623" name="__codelineno-19-623" href="#__codelineno-19-623"></a><span class="gi">+        }</span>
<a id="__codelineno-19-624" name="__codelineno-19-624" href="#__codelineno-19-624"></a><span class="gi">+</span>
<a id="__codelineno-19-625" name="__codelineno-19-625" href="#__codelineno-19-625"></a><span class="gi">+        if(param.IsOut() || !type.IsArithmetic())</span>
<a id="__codelineno-19-626" name="__codelineno-19-626" href="#__codelineno-19-626"></a><span class="gi">+        {</span>
<a id="__codelineno-19-627" name="__codelineno-19-627" href="#__codelineno-19-627"></a><span class="gi">+            if (iCount &lt; PARAM_GPR_COUNT)</span>
<a id="__codelineno-19-628" name="__codelineno-19-628" href="#__codelineno-19-628"></a><span class="gi">+                dp-&gt;val.p = (void*)gprData[iCount++];</span>
<a id="__codelineno-19-629" name="__codelineno-19-629" href="#__codelineno-19-629"></a><span class="gi">+            else</span>
<a id="__codelineno-19-630" name="__codelineno-19-630" href="#__codelineno-19-630"></a><span class="gi">+                dp-&gt;val.p = (void*)*ap++;</span>
<a id="__codelineno-19-631" name="__codelineno-19-631" href="#__codelineno-19-631"></a><span class="gi">+            continue;</span>
<a id="__codelineno-19-632" name="__codelineno-19-632" href="#__codelineno-19-632"></a><span class="gi">+        }</span>
<a id="__codelineno-19-633" name="__codelineno-19-633" href="#__codelineno-19-633"></a><span class="gi">+        // else</span>
<a id="__codelineno-19-634" name="__codelineno-19-634" href="#__codelineno-19-634"></a><span class="gi">+        switch(type)</span>
<a id="__codelineno-19-635" name="__codelineno-19-635" href="#__codelineno-19-635"></a><span class="gi">+        {</span>
<a id="__codelineno-19-636" name="__codelineno-19-636" href="#__codelineno-19-636"></a><span class="gi">+        case nsXPTType::T_I8:</span>
<a id="__codelineno-19-637" name="__codelineno-19-637" href="#__codelineno-19-637"></a><span class="gi">+            if (iCount &lt; PARAM_GPR_COUNT)</span>
<a id="__codelineno-19-638" name="__codelineno-19-638" href="#__codelineno-19-638"></a><span class="gi">+                dp-&gt;val.i8  = (int8_t)gprData[iCount++];</span>
<a id="__codelineno-19-639" name="__codelineno-19-639" href="#__codelineno-19-639"></a><span class="gi">+            else</span>
<a id="__codelineno-19-640" name="__codelineno-19-640" href="#__codelineno-19-640"></a><span class="gi">+                dp-&gt;val.i8  = (int8_t)*ap++;</span>
<a id="__codelineno-19-641" name="__codelineno-19-641" href="#__codelineno-19-641"></a><span class="gi">+            break;</span>
<a id="__codelineno-19-642" name="__codelineno-19-642" href="#__codelineno-19-642"></a><span class="gi">+</span>
<a id="__codelineno-19-643" name="__codelineno-19-643" href="#__codelineno-19-643"></a><span class="gi">+        case nsXPTType::T_I16:</span>
<a id="__codelineno-19-644" name="__codelineno-19-644" href="#__codelineno-19-644"></a><span class="gi">+             if (iCount &lt; PARAM_GPR_COUNT)</span>
<a id="__codelineno-19-645" name="__codelineno-19-645" href="#__codelineno-19-645"></a><span class="gi">+                 dp-&gt;val.i16  = (int16_t)gprData[iCount++];</span>
<a id="__codelineno-19-646" name="__codelineno-19-646" href="#__codelineno-19-646"></a><span class="gi">+             else</span>
<a id="__codelineno-19-647" name="__codelineno-19-647" href="#__codelineno-19-647"></a><span class="gi">+                 dp-&gt;val.i16  = (int16_t)*ap++;</span>
<a id="__codelineno-19-648" name="__codelineno-19-648" href="#__codelineno-19-648"></a><span class="gi">+             break;</span>
<a id="__codelineno-19-649" name="__codelineno-19-649" href="#__codelineno-19-649"></a><span class="gi">+</span>
<a id="__codelineno-19-650" name="__codelineno-19-650" href="#__codelineno-19-650"></a><span class="gi">+        case nsXPTType::T_I32:</span>
<a id="__codelineno-19-651" name="__codelineno-19-651" href="#__codelineno-19-651"></a><span class="gi">+             if (iCount &lt; PARAM_GPR_COUNT)</span>
<a id="__codelineno-19-652" name="__codelineno-19-652" href="#__codelineno-19-652"></a><span class="gi">+                 dp-&gt;val.i32  = (int32_t)gprData[iCount++];</span>
<a id="__codelineno-19-653" name="__codelineno-19-653" href="#__codelineno-19-653"></a><span class="gi">+             else</span>
<a id="__codelineno-19-654" name="__codelineno-19-654" href="#__codelineno-19-654"></a><span class="gi">+                 dp-&gt;val.i32  = (int32_t)*ap++;</span>
<a id="__codelineno-19-655" name="__codelineno-19-655" href="#__codelineno-19-655"></a><span class="gi">+             break;</span>
<a id="__codelineno-19-656" name="__codelineno-19-656" href="#__codelineno-19-656"></a><span class="gi">+</span>
<a id="__codelineno-19-657" name="__codelineno-19-657" href="#__codelineno-19-657"></a><span class="gi">+        case nsXPTType::T_I64:</span>
<a id="__codelineno-19-658" name="__codelineno-19-658" href="#__codelineno-19-658"></a><span class="gi">+             if (iCount &lt; PARAM_GPR_COUNT)</span>
<a id="__codelineno-19-659" name="__codelineno-19-659" href="#__codelineno-19-659"></a><span class="gi">+                 dp-&gt;val.i64  = (int64_t)gprData[iCount++];</span>
<a id="__codelineno-19-660" name="__codelineno-19-660" href="#__codelineno-19-660"></a><span class="gi">+             else</span>
<a id="__codelineno-19-661" name="__codelineno-19-661" href="#__codelineno-19-661"></a><span class="gi">+                 dp-&gt;val.i64  = (int64_t)*ap++;</span>
<a id="__codelineno-19-662" name="__codelineno-19-662" href="#__codelineno-19-662"></a><span class="gi">+             break;</span>
<a id="__codelineno-19-663" name="__codelineno-19-663" href="#__codelineno-19-663"></a><span class="gi">+</span>
<a id="__codelineno-19-664" name="__codelineno-19-664" href="#__codelineno-19-664"></a><span class="gi">+        case nsXPTType::T_U8:</span>
<a id="__codelineno-19-665" name="__codelineno-19-665" href="#__codelineno-19-665"></a><span class="gi">+             if (iCount &lt; PARAM_GPR_COUNT)</span>
<a id="__codelineno-19-666" name="__codelineno-19-666" href="#__codelineno-19-666"></a><span class="gi">+                 dp-&gt;val.u8  = (uint8_t)gprData[iCount++];</span>
<a id="__codelineno-19-667" name="__codelineno-19-667" href="#__codelineno-19-667"></a><span class="gi">+             else</span>
<a id="__codelineno-19-668" name="__codelineno-19-668" href="#__codelineno-19-668"></a><span class="gi">+                 dp-&gt;val.u8  = (uint8_t)*ap++;</span>
<a id="__codelineno-19-669" name="__codelineno-19-669" href="#__codelineno-19-669"></a><span class="gi">+             break;</span>
<a id="__codelineno-19-670" name="__codelineno-19-670" href="#__codelineno-19-670"></a><span class="gi">+</span>
<a id="__codelineno-19-671" name="__codelineno-19-671" href="#__codelineno-19-671"></a><span class="gi">+        case nsXPTType::T_U16:</span>
<a id="__codelineno-19-672" name="__codelineno-19-672" href="#__codelineno-19-672"></a><span class="gi">+             if (iCount &lt; PARAM_GPR_COUNT)</span>
<a id="__codelineno-19-673" name="__codelineno-19-673" href="#__codelineno-19-673"></a><span class="gi">+                 dp-&gt;val.u16  = (uint16_t)gprData[iCount++];</span>
<a id="__codelineno-19-674" name="__codelineno-19-674" href="#__codelineno-19-674"></a><span class="gi">+             else</span>
<a id="__codelineno-19-675" name="__codelineno-19-675" href="#__codelineno-19-675"></a><span class="gi">+                  dp-&gt;val.u16  = (uint16_t)*ap++;</span>
<a id="__codelineno-19-676" name="__codelineno-19-676" href="#__codelineno-19-676"></a><span class="gi">+             break;</span>
<a id="__codelineno-19-677" name="__codelineno-19-677" href="#__codelineno-19-677"></a><span class="gi">+</span>
<a id="__codelineno-19-678" name="__codelineno-19-678" href="#__codelineno-19-678"></a><span class="gi">+        case nsXPTType::T_U32:</span>
<a id="__codelineno-19-679" name="__codelineno-19-679" href="#__codelineno-19-679"></a><span class="gi">+             if (iCount &lt; PARAM_GPR_COUNT)</span>
<a id="__codelineno-19-680" name="__codelineno-19-680" href="#__codelineno-19-680"></a><span class="gi">+                 dp-&gt;val.u32  = (uint32_t)gprData[iCount++];</span>
<a id="__codelineno-19-681" name="__codelineno-19-681" href="#__codelineno-19-681"></a><span class="gi">+             else</span>
<a id="__codelineno-19-682" name="__codelineno-19-682" href="#__codelineno-19-682"></a><span class="gi">+                 dp-&gt;val.u32  = (uint32_t)*ap++;</span>
<a id="__codelineno-19-683" name="__codelineno-19-683" href="#__codelineno-19-683"></a><span class="gi">+             break;</span>
<a id="__codelineno-19-684" name="__codelineno-19-684" href="#__codelineno-19-684"></a><span class="gi">+</span>
<a id="__codelineno-19-685" name="__codelineno-19-685" href="#__codelineno-19-685"></a><span class="gi">+        case nsXPTType::T_U64:</span>
<a id="__codelineno-19-686" name="__codelineno-19-686" href="#__codelineno-19-686"></a><span class="gi">+             if (iCount &lt; PARAM_GPR_COUNT)</span>
<a id="__codelineno-19-687" name="__codelineno-19-687" href="#__codelineno-19-687"></a><span class="gi">+                 dp-&gt;val.u64  = (uint64_t)gprData[iCount++];</span>
<a id="__codelineno-19-688" name="__codelineno-19-688" href="#__codelineno-19-688"></a><span class="gi">+             else</span>
<a id="__codelineno-19-689" name="__codelineno-19-689" href="#__codelineno-19-689"></a><span class="gi">+                 dp-&gt;val.u64  = (uint64_t)*ap++;</span>
<a id="__codelineno-19-690" name="__codelineno-19-690" href="#__codelineno-19-690"></a><span class="gi">+             break;</span>
<a id="__codelineno-19-691" name="__codelineno-19-691" href="#__codelineno-19-691"></a><span class="gi">+</span>
<a id="__codelineno-19-692" name="__codelineno-19-692" href="#__codelineno-19-692"></a><span class="gi">+        case nsXPTType::T_FLOAT:</span>
<a id="__codelineno-19-693" name="__codelineno-19-693" href="#__codelineno-19-693"></a><span class="gi">+              // the float data formate must not be converted!</span>
<a id="__codelineno-19-694" name="__codelineno-19-694" href="#__codelineno-19-694"></a><span class="gi">+              // Just only copy without conversion.</span>
<a id="__codelineno-19-695" name="__codelineno-19-695" href="#__codelineno-19-695"></a><span class="gi">+              if (iCount &lt; PARAM_FPR_COUNT)</span>
<a id="__codelineno-19-696" name="__codelineno-19-696" href="#__codelineno-19-696"></a><span class="gi">+                  dp-&gt;val.f  = *(float*)&amp;fprData[fCount++];</span>
<a id="__codelineno-19-697" name="__codelineno-19-697" href="#__codelineno-19-697"></a><span class="gi">+              else</span>
<a id="__codelineno-19-698" name="__codelineno-19-698" href="#__codelineno-19-698"></a><span class="gi">+                  dp-&gt;val.f  = *((float*)ap++);</span>
<a id="__codelineno-19-699" name="__codelineno-19-699" href="#__codelineno-19-699"></a><span class="gi">+              break;</span>
<a id="__codelineno-19-700" name="__codelineno-19-700" href="#__codelineno-19-700"></a><span class="gi">+</span>
<a id="__codelineno-19-701" name="__codelineno-19-701" href="#__codelineno-19-701"></a><span class="gi">+        case nsXPTType::T_DOUBLE:</span>
<a id="__codelineno-19-702" name="__codelineno-19-702" href="#__codelineno-19-702"></a><span class="gi">+               if (iCount &lt; PARAM_FPR_COUNT)</span>
<a id="__codelineno-19-703" name="__codelineno-19-703" href="#__codelineno-19-703"></a><span class="gi">+                   dp-&gt;val.d  = (double)fprData[fCount++];</span>
<a id="__codelineno-19-704" name="__codelineno-19-704" href="#__codelineno-19-704"></a><span class="gi">+               else</span>
<a id="__codelineno-19-705" name="__codelineno-19-705" href="#__codelineno-19-705"></a><span class="gi">+                   dp-&gt;val.d  = *((double*)ap++);</span>
<a id="__codelineno-19-706" name="__codelineno-19-706" href="#__codelineno-19-706"></a><span class="gi">+               break;</span>
<a id="__codelineno-19-707" name="__codelineno-19-707" href="#__codelineno-19-707"></a><span class="gi">+</span>
<a id="__codelineno-19-708" name="__codelineno-19-708" href="#__codelineno-19-708"></a><span class="gi">+        case nsXPTType::T_BOOL:</span>
<a id="__codelineno-19-709" name="__codelineno-19-709" href="#__codelineno-19-709"></a><span class="gi">+            if (iCount &lt; PARAM_GPR_COUNT)</span>
<a id="__codelineno-19-710" name="__codelineno-19-710" href="#__codelineno-19-710"></a><span class="gi">+                dp-&gt;val.b  = (bool)gprData[iCount++];</span>
<a id="__codelineno-19-711" name="__codelineno-19-711" href="#__codelineno-19-711"></a><span class="gi">+            else</span>
<a id="__codelineno-19-712" name="__codelineno-19-712" href="#__codelineno-19-712"></a><span class="gi">+                dp-&gt;val.b  = (bool)*ap++;</span>
<a id="__codelineno-19-713" name="__codelineno-19-713" href="#__codelineno-19-713"></a><span class="gi">+            break;</span>
<a id="__codelineno-19-714" name="__codelineno-19-714" href="#__codelineno-19-714"></a><span class="gi">+</span>
<a id="__codelineno-19-715" name="__codelineno-19-715" href="#__codelineno-19-715"></a><span class="gi">+        case nsXPTType::T_CHAR:</span>
<a id="__codelineno-19-716" name="__codelineno-19-716" href="#__codelineno-19-716"></a><span class="gi">+            if (iCount &lt; PARAM_GPR_COUNT)</span>
<a id="__codelineno-19-717" name="__codelineno-19-717" href="#__codelineno-19-717"></a><span class="gi">+                dp-&gt;val.c  = (char)gprData[iCount++];</span>
<a id="__codelineno-19-718" name="__codelineno-19-718" href="#__codelineno-19-718"></a><span class="gi">+            else</span>
<a id="__codelineno-19-719" name="__codelineno-19-719" href="#__codelineno-19-719"></a><span class="gi">+                dp-&gt;val.c  = (char)*ap++;</span>
<a id="__codelineno-19-720" name="__codelineno-19-720" href="#__codelineno-19-720"></a><span class="gi">+            break;</span>
<a id="__codelineno-19-721" name="__codelineno-19-721" href="#__codelineno-19-721"></a><span class="gi">+</span>
<a id="__codelineno-19-722" name="__codelineno-19-722" href="#__codelineno-19-722"></a><span class="gi">+        case nsXPTType::T_WCHAR:</span>
<a id="__codelineno-19-723" name="__codelineno-19-723" href="#__codelineno-19-723"></a><span class="gi">+            if (iCount &lt; PARAM_GPR_COUNT)</span>
<a id="__codelineno-19-724" name="__codelineno-19-724" href="#__codelineno-19-724"></a><span class="gi">+                dp-&gt;val.wc  = (wchar_t)gprData[iCount++];</span>
<a id="__codelineno-19-725" name="__codelineno-19-725" href="#__codelineno-19-725"></a><span class="gi">+            else</span>
<a id="__codelineno-19-726" name="__codelineno-19-726" href="#__codelineno-19-726"></a><span class="gi">+                dp-&gt;val.wc  = (wchar_t)*ap++;</span>
<a id="__codelineno-19-727" name="__codelineno-19-727" href="#__codelineno-19-727"></a><span class="gi">+            break;</span>
<a id="__codelineno-19-728" name="__codelineno-19-728" href="#__codelineno-19-728"></a><span class="gi">+</span>
<a id="__codelineno-19-729" name="__codelineno-19-729" href="#__codelineno-19-729"></a><span class="gi">+        default:</span>
<a id="__codelineno-19-730" name="__codelineno-19-730" href="#__codelineno-19-730"></a><span class="gi">+            NS_ASSERTION(0, &quot;bad type&quot;);</span>
<a id="__codelineno-19-731" name="__codelineno-19-731" href="#__codelineno-19-731"></a><span class="gi">+            break;</span>
<a id="__codelineno-19-732" name="__codelineno-19-732" href="#__codelineno-19-732"></a><span class="gi">+        }</span>
<a id="__codelineno-19-733" name="__codelineno-19-733" href="#__codelineno-19-733"></a><span class="gi">+    }</span>
<a id="__codelineno-19-734" name="__codelineno-19-734" href="#__codelineno-19-734"></a><span class="gi">+</span>
<a id="__codelineno-19-735" name="__codelineno-19-735" href="#__codelineno-19-735"></a><span class="gi">+    nsresult result = self-&gt;mOuter-&gt;CallMethod((uint16_t)methodIndex, info,</span>
<a id="__codelineno-19-736" name="__codelineno-19-736" href="#__codelineno-19-736"></a><span class="gi">+                                               dispatchParams);</span>
<a id="__codelineno-19-737" name="__codelineno-19-737" href="#__codelineno-19-737"></a><span class="gi">+</span>
<a id="__codelineno-19-738" name="__codelineno-19-738" href="#__codelineno-19-738"></a><span class="gi">+    if(dispatchParams != paramBuffer)</span>
<a id="__codelineno-19-739" name="__codelineno-19-739" href="#__codelineno-19-739"></a><span class="gi">+        delete [] dispatchParams;</span>
<a id="__codelineno-19-740" name="__codelineno-19-740" href="#__codelineno-19-740"></a><span class="gi">+</span>
<a id="__codelineno-19-741" name="__codelineno-19-741" href="#__codelineno-19-741"></a><span class="gi">+    return result;</span>
<a id="__codelineno-19-742" name="__codelineno-19-742" href="#__codelineno-19-742"></a><span class="gi">+}</span>
<a id="__codelineno-19-743" name="__codelineno-19-743" href="#__codelineno-19-743"></a><span class="gi">+</span>
<a id="__codelineno-19-744" name="__codelineno-19-744" href="#__codelineno-19-744"></a><span class="gi">+#define STUB_ENTRY(n)        /* defined in the assembly file */</span>
<a id="__codelineno-19-745" name="__codelineno-19-745" href="#__codelineno-19-745"></a><span class="gi">+</span>
<a id="__codelineno-19-746" name="__codelineno-19-746" href="#__codelineno-19-746"></a><span class="gi">+#define SENTINEL_ENTRY(n)                              \</span>
<a id="__codelineno-19-747" name="__codelineno-19-747" href="#__codelineno-19-747"></a><span class="gi">+nsresult nsXPTCStubBase::Sentinel##n()                 \</span>
<a id="__codelineno-19-748" name="__codelineno-19-748" href="#__codelineno-19-748"></a><span class="gi">+{                                                      \</span>
<a id="__codelineno-19-749" name="__codelineno-19-749" href="#__codelineno-19-749"></a><span class="gi">+    NS_ASSERTION(0,&quot;nsXPTCStubBase::Sentinel called&quot;); \</span>
<a id="__codelineno-19-750" name="__codelineno-19-750" href="#__codelineno-19-750"></a><span class="gi">+    return NS_ERROR_NOT_IMPLEMENTED;                   \</span>
<a id="__codelineno-19-751" name="__codelineno-19-751" href="#__codelineno-19-751"></a><span class="gi">+}</span>
<a id="__codelineno-19-752" name="__codelineno-19-752" href="#__codelineno-19-752"></a><span class="gi">+</span>
<a id="__codelineno-19-753" name="__codelineno-19-753" href="#__codelineno-19-753"></a><span class="gi">+#include &quot;xptcstubsdef.inc&quot;</span>
</code></pre></div>
<p>将文档中的<code>media/webrtc/trunk/webrtc/build/build_config.h</code>补丁打到<code>third_party/libwebrtc/build/build_config.h</code> 中</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="gd">--- third_party/libwebrtc/build/build_config.h</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="gi">+++ third_party/libwebrtc/build/build_config.h</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="gu">@@ -150,6 +150,10 @@</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="w"> </span>#define ARCH_CPU_MIPS_FAMILY 1
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="w"> </span>#define ARCH_CPU_MIPS 1
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w"> </span>#define ARCH_CPU_64_BITS 1
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="gi">+#elif defined(__loongarch64)</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="gi">+#define ARCH_CPU_LOONGARCH_FAMILY 1</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="gi">+#define ARCH_CPU_LOONGARCH 1</span>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="gi">+#define ARCH_CPU_64_BITS 1</span>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="w"> </span>#elif defined(__mips__)
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="w"> </span>#define ARCH_CPU_MIPS_FAMILY 1
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="w"> </span>#define ARCH_CPU_MIPS 1
</code></pre></div>
<h2 id="build">开始Build</h2>
<p>在根目录下运行<code>./mach build -j5</code></p>
<h2 id="_3">打包</h2>
<p>根目录下运行<code>./mach package</code></p>
<p>配置git代理，<code>vim ~/.gitconfig</code></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="o">[</span>url<span class="w"> </span><span class="s2">&quot;https://github.com/&quot;</span><span class="o">]</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w">    </span><span class="nv">insteadOf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>https://ghproxy.com/https://github.com/
</code></pre></div>
<p>修改根目录<code>browser/installer/linux/debian</code>下<code>install.in</code>将firefox改成thunderbird</p>
<p>进入<code>obj-loongarch64-unknown-linux-gnu/dist</code>找到压缩包，运行<code>../../mach repackage deb -i thunderbird-114.0.en-US.linux-loongarch64.tar.bz2 -o thunderbird-114.deb --arch all --version 114.0b6 --build-number 1 --templates=browser/installer/linux/debian</code></p>
<h2 id="_4">测试</h2>
<p>去图形化界面使用终端去到根目录下运行<code>./mach run</code></p>
<p>根目录下运行<code>./mach xpcshell-test comm/mail/components/extensions/test/xpcshell</code></p>
<p><span style='color:red'>目前还在完善测试功能</span></p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../assets/javascripts/bundle.efa0ade1.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
    
  </body>
</html>